{"kind":"ControllerRevisionList","apiVersion":"apps/v1","metadata":{"resourceVersion":"58118910"},"items":[{"metadata":{"name":"cilium-6769564d8c","namespace":"kube-system","uid":"a4760787-9cc3-47d6-ab2c-5e815c715512","resourceVersion":"377","creationTimestamp":"2021-11-26T10:25:45Z","labels":{"controller-revision-hash":"6769564d8c","doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"},"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cilium\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"prometheus.io/port\":\"9090\",\"prometheus.io/scrape\":\"true\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"spec\":{\"containers\":[{\"args\":[\"--kvstore=etcd\",\"--kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config\",\"--config-dir=/tmp/cilium/config-map\"],\"command\":[\"cilium-agent\"],\"env\":[{\"name\":\"K8S_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"CILIUM_K8S_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CILIUM_FLANNEL_MASTER_DEVICE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-master-device\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_FLANNEL_UNINSTALL_ON_EXIT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-uninstall-on-exit\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CLUSTERMESH_CONFIG\",\"value\":\"/var/lib/cilium/clustermesh/\"},{\"name\":\"CILIUM_CNI_CHAINING_MODE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"cni-chaining-mode\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CUSTOM_CNI_CONF\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"custom-cni-conf\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/digitalocean/cilium:1.10.1-con-4989\",\"imagePullPolicy\":\"IfNotPresent\",\"lifecycle\":{\"postStart\":{\"exec\":{\"command\":[\"/cni-install.sh\"]}},\"preStop\":{\"exec\":{\"command\":[\"/cni-uninstall.sh\"]}}},\"livenessProbe\":{\"failureThreshold\":10,\"httpGet\":{\"host\":\"127.0.0.1\",\"httpHeaders\":[{\"name\":\"brief\",\"value\":\"true\"}],\"path\":\"/healthz\",\"port\":9876,\"scheme\":\"HTTP\"},\"initialDelaySeconds\":120,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"name\":\"cilium-agent\",\"ports\":[{\"containerPort\":9090,\"hostPort\":9090,\"name\":\"prometheus\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"exec\":{\"command\":[\"cilium\",\"status\",\"--brief\"]},\"failureThreshold\":3,\"initialDelaySeconds\":5,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"cni-path\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"etc-cni-netd\"},{\"mountPath\":\"/var/lib/etcd-config\",\"name\":\"etcd-config-path\",\"readOnly\":true},{\"mountPath\":\"/var/lib/etcd-secrets\",\"name\":\"etcd-secrets\",\"readOnly\":true},{\"mountPath\":\"/var/lib/cilium/clustermesh\",\"name\":\"clustermesh-secrets\",\"readOnly\":true},{\"mountPath\":\"/tmp/cilium/config-map\",\"name\":\"cilium-config-path\",\"readOnly\":true},{\"mountPath\":\"/lib/modules\",\"name\":\"lib-modules\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]}],\"dnsPolicy\":\"ClusterFirst\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"/init-container.sh\"],\"env\":[{\"name\":\"CILIUM_ALL_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_BPF_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-bpf-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_WAIT_BPF_MOUNT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"wait-bpf-mount\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/cilium/cilium-init:2019-04-05\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"clean-cilium-state\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"mountPropagation\":\"HostToContainer\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"}]}],\"priorityClassName\":\"system-node-critical\",\"restartPolicy\":\"Always\",\"serviceAccount\":\"cilium\",\"serviceAccountName\":\"cilium\",\"terminationGracePeriodSeconds\":1,\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/run/cilium\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cilium-run\"},{\"hostPath\":{\"path\":\"/sys/fs/bpf\",\"type\":\"DirectoryOrCreate\"},\"name\":\"bpf-maps\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cni-path\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\",\"type\":\"DirectoryOrCreate\"},\"name\":\"etc-cni-netd\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"},{\"configMap\":{\"defaultMode\":420,\"items\":[{\"key\":\"etcd-config\",\"path\":\"etcd.config\"}],\"name\":\"cilium-config\"},\"name\":\"etcd-config-path\"},{\"name\":\"etcd-secrets\",\"secret\":{\"items\":[{\"key\":\"etcd-ca\",\"path\":\"etcd-client-ca.crt\"},{\"key\":\"etcd-key\",\"path\":\"etcd-client.key\"},{\"key\":\"etcd-cert\",\"path\":\"etcd-client.crt\"}],\"secretName\":\"etcd-secrets\"}},{\"name\":\"clustermesh-secrets\",\"secret\":{\"defaultMode\":420,\"optional\":true,\"secretName\":\"cilium-clustermesh\"}},{\"configMap\":{\"name\":\"cilium-config\"},\"name\":\"cilium-config-path\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"cilium","uid":"6acc2ecc-019c-4015-b116-ae0273eb9713","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-11-26T10:25:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6acc2ecc-019c-4015-b116-ae0273eb9713\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","prometheus.io/port":"9090","prometheus.io/scrape":"true"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"}},"spec":{"containers":[{"args":["--kvstore=etcd","--kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config","--config-dir=/tmp/cilium/config-map"],"command":["cilium-agent"],"env":[{"name":"K8S_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"CILIUM_K8S_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"CILIUM_FLANNEL_MASTER_DEVICE","valueFrom":{"configMapKeyRef":{"key":"flannel-master-device","name":"cilium-config","optional":true}}},{"name":"CILIUM_FLANNEL_UNINSTALL_ON_EXIT","valueFrom":{"configMapKeyRef":{"key":"flannel-uninstall-on-exit","name":"cilium-config","optional":true}}},{"name":"CILIUM_CLUSTERMESH_CONFIG","value":"/var/lib/cilium/clustermesh/"},{"name":"CILIUM_CNI_CHAINING_MODE","valueFrom":{"configMapKeyRef":{"key":"cni-chaining-mode","name":"cilium-config","optional":true}}},{"name":"CILIUM_CUSTOM_CNI_CONF","valueFrom":{"configMapKeyRef":{"key":"custom-cni-conf","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/digitalocean/cilium:1.10.1-con-4989","imagePullPolicy":"IfNotPresent","lifecycle":{"postStart":{"exec":{"command":["/cni-install.sh"]}},"preStop":{"exec":{"command":["/cni-uninstall.sh"]}}},"livenessProbe":{"failureThreshold":10,"httpGet":{"host":"127.0.0.1","httpHeaders":[{"name":"brief","value":"true"}],"path":"/healthz","port":9876,"scheme":"HTTP"},"initialDelaySeconds":120,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"name":"cilium-agent","ports":[{"containerPort":9090,"hostPort":9090,"name":"prometheus","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["cilium","status","--brief"]},"failureThreshold":3,"initialDelaySeconds":5,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"300m","memory":"300Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"},{"mountPath":"/host/opt/cni/bin","name":"cni-path"},{"mountPath":"/host/etc/cni/net.d","name":"etc-cni-netd"},{"mountPath":"/var/lib/etcd-config","name":"etcd-config-path","readOnly":true},{"mountPath":"/var/lib/etcd-secrets","name":"etcd-secrets","readOnly":true},{"mountPath":"/var/lib/cilium/clustermesh","name":"clustermesh-secrets","readOnly":true},{"mountPath":"/tmp/cilium/config-map","name":"cilium-config-path","readOnly":true},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["/init-container.sh"],"env":[{"name":"CILIUM_ALL_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_BPF_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-bpf-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_WAIT_BPF_MOUNT","valueFrom":{"configMapKeyRef":{"key":"wait-bpf-mount","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/cilium/cilium-init:2019-04-05","imagePullPolicy":"IfNotPresent","name":"clean-cilium-state","resources":{},"securityContext":{"capabilities":{"add":["NET_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","mountPropagation":"HostToContainer","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cilium","serviceAccountName":"cilium","terminationGracePeriodSeconds":1,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/run/cilium","type":"DirectoryOrCreate"},"name":"cilium-run"},{"hostPath":{"path":"/sys/fs/bpf","type":"DirectoryOrCreate"},"name":"bpf-maps"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-path"},{"hostPath":{"path":"/etc/cni/net.d","type":"DirectoryOrCreate"},"name":"etc-cni-netd"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"configMap":{"defaultMode":420,"items":[{"key":"etcd-config","path":"etcd.config"}],"name":"cilium-config"},"name":"etcd-config-path"},{"name":"etcd-secrets","secret":{"defaultMode":420,"items":[{"key":"etcd-ca","path":"etcd-client-ca.crt"},{"key":"etcd-key","path":"etcd-client.key"},{"key":"etcd-cert","path":"etcd-client.crt"}],"secretName":"etcd-secrets"}},{"name":"clustermesh-secrets","secret":{"defaultMode":420,"optional":true,"secretName":"cilium-clustermesh"}},{"configMap":{"defaultMode":420,"name":"cilium-config"},"name":"cilium-config-path"}]}}}},"revision":1},{"metadata":{"name":"cilium-68f8cc5d79","namespace":"kube-system","uid":"fbf4bb24-0b89-4de5-b235-041f8505ac02","resourceVersion":"32648393","creationTimestamp":"2022-03-12T15:04:46Z","labels":{"controller-revision-hash":"68f8cc5d79","doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"},"annotations":{"deprecated.daemonset.template.generation":"5","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cilium\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"kubectl.kubernetes.io/default-container\":\"cilium-agent\",\"prometheus.io/port\":\"9090\",\"prometheus.io/scrape\":\"true\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"spec\":{\"containers\":[{\"command\":[\"/arp-flusher\"],\"image\":\"docker.io/digitalocean/arp-flusher:v0.0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"arp-flusher\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"75Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true}},{\"command\":[\"/bin/bash\",\"-ec\",\"ip -statistics -statistics neigh flush nud permanent\\nexec cilium-agent \\\\\\n  --kvstore=etcd \\\\\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\\\\n  --config-dir=/tmp/cilium/config-map \\\\\\n  --arping-refresh-period=30s\\n\"],\"env\":[{\"name\":\"K8S_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"CILIUM_K8S_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CILIUM_FLANNEL_MASTER_DEVICE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-master-device\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_FLANNEL_UNINSTALL_ON_EXIT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-uninstall-on-exit\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CLUSTERMESH_CONFIG\",\"value\":\"/var/lib/cilium/clustermesh/\"},{\"name\":\"CILIUM_CNI_CHAINING_MODE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"cni-chaining-mode\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CUSTOM_CNI_CONF\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"custom-cni-conf\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/cilium/cilium:v1.10.4\",\"imagePullPolicy\":\"IfNotPresent\",\"lifecycle\":{\"postStart\":{\"exec\":{\"command\":[\"/cni-install.sh\"]}},\"preStop\":{\"exec\":{\"command\":[\"/cni-uninstall.sh\"]}}},\"livenessProbe\":{\"failureThreshold\":10,\"httpGet\":{\"host\":\"127.0.0.1\",\"httpHeaders\":[{\"name\":\"brief\",\"value\":\"true\"}],\"path\":\"/healthz\",\"port\":9876,\"scheme\":\"HTTP\"},\"initialDelaySeconds\":120,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"name\":\"cilium-agent\",\"ports\":[{\"containerPort\":9090,\"hostPort\":9090,\"name\":\"prometheus\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"exec\":{\"command\":[\"cilium\",\"status\",\"--brief\"]},\"failureThreshold\":3,\"initialDelaySeconds\":5,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"cni-path\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"etc-cni-netd\"},{\"mountPath\":\"/var/lib/etcd-config\",\"name\":\"etcd-config-path\",\"readOnly\":true},{\"mountPath\":\"/var/lib/etcd-secrets\",\"name\":\"etcd-secrets\",\"readOnly\":true},{\"mountPath\":\"/var/lib/cilium/clustermesh\",\"name\":\"clustermesh-secrets\",\"readOnly\":true},{\"mountPath\":\"/tmp/cilium/config-map\",\"name\":\"cilium-config-path\",\"readOnly\":true},{\"mountPath\":\"/lib/modules\",\"name\":\"lib-modules\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]}],\"dnsPolicy\":\"ClusterFirst\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"/init-container.sh\"],\"env\":[{\"name\":\"CILIUM_ALL_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_BPF_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-bpf-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_WAIT_BPF_MOUNT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"wait-bpf-mount\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/cilium/cilium-init:2019-04-05\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"clean-cilium-state\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"mountPropagation\":\"HostToContainer\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"}]}],\"priorityClassName\":\"system-node-critical\",\"restartPolicy\":\"Always\",\"serviceAccount\":\"cilium\",\"serviceAccountName\":\"cilium\",\"terminationGracePeriodSeconds\":1,\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/run/cilium\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cilium-run\"},{\"hostPath\":{\"path\":\"/sys/fs/bpf\",\"type\":\"DirectoryOrCreate\"},\"name\":\"bpf-maps\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cni-path\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\",\"type\":\"DirectoryOrCreate\"},\"name\":\"etc-cni-netd\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"},{\"configMap\":{\"defaultMode\":420,\"items\":[{\"key\":\"etcd-config\",\"path\":\"etcd.config\"}],\"name\":\"cilium-config\"},\"name\":\"etcd-config-path\"},{\"name\":\"etcd-secrets\",\"secret\":{\"items\":[{\"key\":\"etcd-ca\",\"path\":\"etcd-client-ca.crt\"},{\"key\":\"etcd-key\",\"path\":\"etcd-client.key\"},{\"key\":\"etcd-cert\",\"path\":\"etcd-client.crt\"}],\"secretName\":\"etcd-secrets\"}},{\"name\":\"clustermesh-secrets\",\"secret\":{\"defaultMode\":420,\"optional\":true,\"secretName\":\"cilium-clustermesh\"}},{\"configMap\":{\"name\":\"cilium-config\"},\"name\":\"cilium-config-path\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"cilium","uid":"6acc2ecc-019c-4015-b116-ae0273eb9713","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-03-12T15:04:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6acc2ecc-019c-4015-b116-ae0273eb9713\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","kubectl.kubernetes.io/default-container":"cilium-agent","prometheus.io/port":"9090","prometheus.io/scrape":"true"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"}},"spec":{"containers":[{"command":["/arp-flusher"],"image":"docker.io/digitalocean/arp-flusher:v0.0.2","imagePullPolicy":"IfNotPresent","name":"arp-flusher","resources":{"limits":{"cpu":"100m","memory":"75Mi"},"requests":{"cpu":"10m","memory":"10Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"},{"command":["/bin/bash","-ec","ip -statistics -statistics neigh flush nud permanent\nexec cilium-agent \\\n  --kvstore=etcd \\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\n  --config-dir=/tmp/cilium/config-map \\\n  --arping-refresh-period=30s\n"],"env":[{"name":"K8S_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"CILIUM_K8S_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"CILIUM_FLANNEL_MASTER_DEVICE","valueFrom":{"configMapKeyRef":{"key":"flannel-master-device","name":"cilium-config","optional":true}}},{"name":"CILIUM_FLANNEL_UNINSTALL_ON_EXIT","valueFrom":{"configMapKeyRef":{"key":"flannel-uninstall-on-exit","name":"cilium-config","optional":true}}},{"name":"CILIUM_CLUSTERMESH_CONFIG","value":"/var/lib/cilium/clustermesh/"},{"name":"CILIUM_CNI_CHAINING_MODE","valueFrom":{"configMapKeyRef":{"key":"cni-chaining-mode","name":"cilium-config","optional":true}}},{"name":"CILIUM_CUSTOM_CNI_CONF","valueFrom":{"configMapKeyRef":{"key":"custom-cni-conf","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/cilium/cilium:v1.10.4","imagePullPolicy":"IfNotPresent","lifecycle":{"postStart":{"exec":{"command":["/cni-install.sh"]}},"preStop":{"exec":{"command":["/cni-uninstall.sh"]}}},"livenessProbe":{"failureThreshold":10,"httpGet":{"host":"127.0.0.1","httpHeaders":[{"name":"brief","value":"true"}],"path":"/healthz","port":9876,"scheme":"HTTP"},"initialDelaySeconds":120,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"name":"cilium-agent","ports":[{"containerPort":9090,"hostPort":9090,"name":"prometheus","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["cilium","status","--brief"]},"failureThreshold":3,"initialDelaySeconds":5,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"300m","memory":"300Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"},{"mountPath":"/host/opt/cni/bin","name":"cni-path"},{"mountPath":"/host/etc/cni/net.d","name":"etc-cni-netd"},{"mountPath":"/var/lib/etcd-config","name":"etcd-config-path","readOnly":true},{"mountPath":"/var/lib/etcd-secrets","name":"etcd-secrets","readOnly":true},{"mountPath":"/var/lib/cilium/clustermesh","name":"clustermesh-secrets","readOnly":true},{"mountPath":"/tmp/cilium/config-map","name":"cilium-config-path","readOnly":true},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["/init-container.sh"],"env":[{"name":"CILIUM_ALL_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_BPF_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-bpf-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_WAIT_BPF_MOUNT","valueFrom":{"configMapKeyRef":{"key":"wait-bpf-mount","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/cilium/cilium-init:2019-04-05","imagePullPolicy":"IfNotPresent","name":"clean-cilium-state","resources":{},"securityContext":{"capabilities":{"add":["NET_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","mountPropagation":"HostToContainer","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cilium","serviceAccountName":"cilium","terminationGracePeriodSeconds":1,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/run/cilium","type":"DirectoryOrCreate"},"name":"cilium-run"},{"hostPath":{"path":"/sys/fs/bpf","type":"DirectoryOrCreate"},"name":"bpf-maps"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-path"},{"hostPath":{"path":"/etc/cni/net.d","type":"DirectoryOrCreate"},"name":"etc-cni-netd"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"configMap":{"defaultMode":420,"items":[{"key":"etcd-config","path":"etcd.config"}],"name":"cilium-config"},"name":"etcd-config-path"},{"name":"etcd-secrets","secret":{"defaultMode":420,"items":[{"key":"etcd-ca","path":"etcd-client-ca.crt"},{"key":"etcd-key","path":"etcd-client.key"},{"key":"etcd-cert","path":"etcd-client.crt"}],"secretName":"etcd-secrets"}},{"name":"clustermesh-secrets","secret":{"defaultMode":420,"optional":true,"secretName":"cilium-clustermesh"}},{"configMap":{"defaultMode":420,"name":"cilium-config"},"name":"cilium-config-path"}]}}}},"revision":5},{"metadata":{"name":"cilium-6cd9566f8","namespace":"kube-system","uid":"4be1bd4d-8b64-46cc-860f-9a1664ade408","resourceVersion":"21909223","creationTimestamp":"2022-02-05T15:04:47Z","labels":{"controller-revision-hash":"6cd9566f8","doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"},"annotations":{"deprecated.daemonset.template.generation":"4","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cilium\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"prometheus.io/port\":\"9090\",\"prometheus.io/scrape\":\"true\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"spec\":{\"containers\":[{\"command\":[\"/arp-flusher\"],\"image\":\"docker.io/digitalocean/arp-flusher:v0.0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"arp-flusher\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"75Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true}},{\"command\":[\"/bin/bash\",\"-ec\",\"ip -statistics -statistics neigh flush nud permanent\\nexec cilium-agent \\\\\\n  --kvstore=etcd \\\\\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\\\\n  --config-dir=/tmp/cilium/config-map \\\\\\n  --arping-refresh-period=30s\\n\"],\"env\":[{\"name\":\"K8S_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"CILIUM_K8S_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CILIUM_FLANNEL_MASTER_DEVICE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-master-device\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_FLANNEL_UNINSTALL_ON_EXIT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-uninstall-on-exit\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CLUSTERMESH_CONFIG\",\"value\":\"/var/lib/cilium/clustermesh/\"},{\"name\":\"CILIUM_CNI_CHAINING_MODE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"cni-chaining-mode\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CUSTOM_CNI_CONF\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"custom-cni-conf\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/cilium/cilium:v1.10.4\",\"imagePullPolicy\":\"IfNotPresent\",\"lifecycle\":{\"postStart\":{\"exec\":{\"command\":[\"/cni-install.sh\"]}},\"preStop\":{\"exec\":{\"command\":[\"/cni-uninstall.sh\"]}}},\"livenessProbe\":{\"failureThreshold\":10,\"httpGet\":{\"host\":\"127.0.0.1\",\"httpHeaders\":[{\"name\":\"brief\",\"value\":\"true\"}],\"path\":\"/healthz\",\"port\":9876,\"scheme\":\"HTTP\"},\"initialDelaySeconds\":120,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"name\":\"cilium-agent\",\"ports\":[{\"containerPort\":9090,\"hostPort\":9090,\"name\":\"prometheus\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"exec\":{\"command\":[\"cilium\",\"status\",\"--brief\"]},\"failureThreshold\":3,\"initialDelaySeconds\":5,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"cni-path\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"etc-cni-netd\"},{\"mountPath\":\"/var/lib/etcd-config\",\"name\":\"etcd-config-path\",\"readOnly\":true},{\"mountPath\":\"/var/lib/etcd-secrets\",\"name\":\"etcd-secrets\",\"readOnly\":true},{\"mountPath\":\"/var/lib/cilium/clustermesh\",\"name\":\"clustermesh-secrets\",\"readOnly\":true},{\"mountPath\":\"/tmp/cilium/config-map\",\"name\":\"cilium-config-path\",\"readOnly\":true},{\"mountPath\":\"/lib/modules\",\"name\":\"lib-modules\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]}],\"dnsPolicy\":\"ClusterFirst\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"/init-container.sh\"],\"env\":[{\"name\":\"CILIUM_ALL_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_BPF_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-bpf-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_WAIT_BPF_MOUNT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"wait-bpf-mount\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/cilium/cilium-init:2019-04-05\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"clean-cilium-state\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"mountPropagation\":\"HostToContainer\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"}]}],\"priorityClassName\":\"system-node-critical\",\"restartPolicy\":\"Always\",\"serviceAccount\":\"cilium\",\"serviceAccountName\":\"cilium\",\"terminationGracePeriodSeconds\":1,\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/run/cilium\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cilium-run\"},{\"hostPath\":{\"path\":\"/sys/fs/bpf\",\"type\":\"DirectoryOrCreate\"},\"name\":\"bpf-maps\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cni-path\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\",\"type\":\"DirectoryOrCreate\"},\"name\":\"etc-cni-netd\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"},{\"configMap\":{\"defaultMode\":420,\"items\":[{\"key\":\"etcd-config\",\"path\":\"etcd.config\"}],\"name\":\"cilium-config\"},\"name\":\"etcd-config-path\"},{\"name\":\"etcd-secrets\",\"secret\":{\"items\":[{\"key\":\"etcd-ca\",\"path\":\"etcd-client-ca.crt\"},{\"key\":\"etcd-key\",\"path\":\"etcd-client.key\"},{\"key\":\"etcd-cert\",\"path\":\"etcd-client.crt\"}],\"secretName\":\"etcd-secrets\"}},{\"name\":\"clustermesh-secrets\",\"secret\":{\"defaultMode\":420,\"optional\":true,\"secretName\":\"cilium-clustermesh\"}},{\"configMap\":{\"name\":\"cilium-config\"},\"name\":\"cilium-config-path\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"cilium","uid":"6acc2ecc-019c-4015-b116-ae0273eb9713","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-02-05T15:04:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6acc2ecc-019c-4015-b116-ae0273eb9713\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","prometheus.io/port":"9090","prometheus.io/scrape":"true"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"}},"spec":{"containers":[{"command":["/arp-flusher"],"image":"docker.io/digitalocean/arp-flusher:v0.0.2","imagePullPolicy":"IfNotPresent","name":"arp-flusher","resources":{"limits":{"cpu":"100m","memory":"75Mi"},"requests":{"cpu":"10m","memory":"10Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"},{"command":["/bin/bash","-ec","ip -statistics -statistics neigh flush nud permanent\nexec cilium-agent \\\n  --kvstore=etcd \\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\n  --config-dir=/tmp/cilium/config-map \\\n  --arping-refresh-period=30s\n"],"env":[{"name":"K8S_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"CILIUM_K8S_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"CILIUM_FLANNEL_MASTER_DEVICE","valueFrom":{"configMapKeyRef":{"key":"flannel-master-device","name":"cilium-config","optional":true}}},{"name":"CILIUM_FLANNEL_UNINSTALL_ON_EXIT","valueFrom":{"configMapKeyRef":{"key":"flannel-uninstall-on-exit","name":"cilium-config","optional":true}}},{"name":"CILIUM_CLUSTERMESH_CONFIG","value":"/var/lib/cilium/clustermesh/"},{"name":"CILIUM_CNI_CHAINING_MODE","valueFrom":{"configMapKeyRef":{"key":"cni-chaining-mode","name":"cilium-config","optional":true}}},{"name":"CILIUM_CUSTOM_CNI_CONF","valueFrom":{"configMapKeyRef":{"key":"custom-cni-conf","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/cilium/cilium:v1.10.4","imagePullPolicy":"IfNotPresent","lifecycle":{"postStart":{"exec":{"command":["/cni-install.sh"]}},"preStop":{"exec":{"command":["/cni-uninstall.sh"]}}},"livenessProbe":{"failureThreshold":10,"httpGet":{"host":"127.0.0.1","httpHeaders":[{"name":"brief","value":"true"}],"path":"/healthz","port":9876,"scheme":"HTTP"},"initialDelaySeconds":120,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"name":"cilium-agent","ports":[{"containerPort":9090,"hostPort":9090,"name":"prometheus","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["cilium","status","--brief"]},"failureThreshold":3,"initialDelaySeconds":5,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"300m","memory":"300Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"},{"mountPath":"/host/opt/cni/bin","name":"cni-path"},{"mountPath":"/host/etc/cni/net.d","name":"etc-cni-netd"},{"mountPath":"/var/lib/etcd-config","name":"etcd-config-path","readOnly":true},{"mountPath":"/var/lib/etcd-secrets","name":"etcd-secrets","readOnly":true},{"mountPath":"/var/lib/cilium/clustermesh","name":"clustermesh-secrets","readOnly":true},{"mountPath":"/tmp/cilium/config-map","name":"cilium-config-path","readOnly":true},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["/init-container.sh"],"env":[{"name":"CILIUM_ALL_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_BPF_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-bpf-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_WAIT_BPF_MOUNT","valueFrom":{"configMapKeyRef":{"key":"wait-bpf-mount","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/cilium/cilium-init:2019-04-05","imagePullPolicy":"IfNotPresent","name":"clean-cilium-state","resources":{},"securityContext":{"capabilities":{"add":["NET_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","mountPropagation":"HostToContainer","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cilium","serviceAccountName":"cilium","terminationGracePeriodSeconds":1,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/run/cilium","type":"DirectoryOrCreate"},"name":"cilium-run"},{"hostPath":{"path":"/sys/fs/bpf","type":"DirectoryOrCreate"},"name":"bpf-maps"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-path"},{"hostPath":{"path":"/etc/cni/net.d","type":"DirectoryOrCreate"},"name":"etc-cni-netd"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"configMap":{"defaultMode":420,"items":[{"key":"etcd-config","path":"etcd.config"}],"name":"cilium-config"},"name":"etcd-config-path"},{"name":"etcd-secrets","secret":{"defaultMode":420,"items":[{"key":"etcd-ca","path":"etcd-client-ca.crt"},{"key":"etcd-key","path":"etcd-client.key"},{"key":"etcd-cert","path":"etcd-client.crt"}],"secretName":"etcd-secrets"}},{"name":"clustermesh-secrets","secret":{"defaultMode":420,"optional":true,"secretName":"cilium-clustermesh"}},{"configMap":{"defaultMode":420,"name":"cilium-config"},"name":"cilium-config-path"}]}}}},"revision":4},{"metadata":{"name":"cilium-7876fcb9c7","namespace":"kube-system","uid":"dfbc4d6d-987a-49a5-9be2-3dfb43ae3f93","resourceVersion":"47397869","creationTimestamp":"2022-04-09T15:05:17Z","labels":{"controller-revision-hash":"7876fcb9c7","doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"},"annotations":{"deprecated.daemonset.template.generation":"6","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cilium\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"kubectl.kubernetes.io/default-container\":\"cilium-agent\",\"prometheus.io/port\":\"9090\",\"prometheus.io/scrape\":\"true\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"spec\":{\"containers\":[{\"command\":[\"/arp-flusher\"],\"image\":\"docker.io/digitalocean/arp-flusher:v0.0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"arp-flusher\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"75Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true}},{\"command\":[\"/bin/bash\",\"-ec\",\"ip -statistics -statistics neigh flush nud permanent\\nexec cilium-agent \\\\\\n  --kvstore=etcd \\\\\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\\\\n  --config-dir=/tmp/cilium/config-map \\\\\\n  --arping-refresh-period=30s\\n\"],\"env\":[{\"name\":\"K8S_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"CILIUM_K8S_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CILIUM_FLANNEL_MASTER_DEVICE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-master-device\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_FLANNEL_UNINSTALL_ON_EXIT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-uninstall-on-exit\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CLUSTERMESH_CONFIG\",\"value\":\"/var/lib/cilium/clustermesh/\"},{\"name\":\"CILIUM_CNI_CHAINING_MODE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"cni-chaining-mode\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CUSTOM_CNI_CONF\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"custom-cni-conf\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"quay.io/cilium/cilium:v1.10.4\",\"imagePullPolicy\":\"IfNotPresent\",\"lifecycle\":{\"postStart\":{\"exec\":{\"command\":[\"/cni-install.sh\"]}},\"preStop\":{\"exec\":{\"command\":[\"/cni-uninstall.sh\"]}}},\"livenessProbe\":{\"failureThreshold\":10,\"httpGet\":{\"host\":\"127.0.0.1\",\"httpHeaders\":[{\"name\":\"brief\",\"value\":\"true\"}],\"path\":\"/healthz\",\"port\":9876,\"scheme\":\"HTTP\"},\"initialDelaySeconds\":120,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"name\":\"cilium-agent\",\"ports\":[{\"containerPort\":9090,\"hostPort\":9090,\"name\":\"prometheus\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"exec\":{\"command\":[\"cilium\",\"status\",\"--brief\"]},\"failureThreshold\":3,\"initialDelaySeconds\":5,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"cni-path\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"etc-cni-netd\"},{\"mountPath\":\"/var/lib/etcd-config\",\"name\":\"etcd-config-path\",\"readOnly\":true},{\"mountPath\":\"/var/lib/etcd-secrets\",\"name\":\"etcd-secrets\",\"readOnly\":true},{\"mountPath\":\"/var/lib/cilium/clustermesh\",\"name\":\"clustermesh-secrets\",\"readOnly\":true},{\"mountPath\":\"/tmp/cilium/config-map\",\"name\":\"cilium-config-path\",\"readOnly\":true},{\"mountPath\":\"/lib/modules\",\"name\":\"lib-modules\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]}],\"dnsPolicy\":\"ClusterFirst\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"bash\",\"-e\",\"-c\",\"# This will get the node object for the local node and search through\\n# the assigned addresses in the object in order to check whether CCM\\n# already set the internal AND external IP since cilium needs both\\n# for a clean startup.\\n# The grep matches regardless of the order of IPs.\\nuntil /host/usr/bin/kubectl get node ${HOSTNAME} -o jsonpath=\\\"{.status.addresses[*].type}\\\" | grep -E \\\"InternalIP.*ExternalIP|ExternalIP.*InternalIP\\\"; do echo \\\"waiting for CCM to store internal and external IP addresses in node object: ${HOSTNAME}\\\" \\u0026\\u0026 sleep 3; done;\\n\"],\"image\":\"quay.io/cilium/cilium:v1.10.4\",\"name\":\"delay-cilium-for-ccm\",\"resources\":{\"requests\":{\"cpu\":\"100m\",\"memory\":\"100Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/host/usr/bin/kubectl\",\"name\":\"host-kubectl\"}]},{\"command\":[\"/init-container.sh\"],\"env\":[{\"name\":\"CILIUM_ALL_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_BPF_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-bpf-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_WAIT_BPF_MOUNT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"wait-bpf-mount\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"quay.io/cilium/cilium-init:2019-04-05\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"clean-cilium-state\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"mountPropagation\":\"HostToContainer\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"}]}],\"priorityClassName\":\"system-node-critical\",\"restartPolicy\":\"Always\",\"serviceAccount\":\"cilium\",\"serviceAccountName\":\"cilium\",\"terminationGracePeriodSeconds\":1,\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/run/cilium\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cilium-run\"},{\"hostPath\":{\"path\":\"/sys/fs/bpf\",\"type\":\"DirectoryOrCreate\"},\"name\":\"bpf-maps\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cni-path\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\",\"type\":\"DirectoryOrCreate\"},\"name\":\"etc-cni-netd\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"},{\"configMap\":{\"defaultMode\":420,\"items\":[{\"key\":\"etcd-config\",\"path\":\"etcd.config\"}],\"name\":\"cilium-config\"},\"name\":\"etcd-config-path\"},{\"name\":\"etcd-secrets\",\"secret\":{\"items\":[{\"key\":\"etcd-ca\",\"path\":\"etcd-client-ca.crt\"},{\"key\":\"etcd-key\",\"path\":\"etcd-client.key\"},{\"key\":\"etcd-cert\",\"path\":\"etcd-client.crt\"}],\"secretName\":\"etcd-secrets\"}},{\"name\":\"clustermesh-secrets\",\"secret\":{\"defaultMode\":420,\"optional\":true,\"secretName\":\"cilium-clustermesh\"}},{\"configMap\":{\"name\":\"cilium-config\"},\"name\":\"cilium-config-path\"},{\"hostPath\":{\"path\":\"/usr/bin/kubectl\",\"type\":\"File\"},\"name\":\"host-kubectl\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"cilium","uid":"6acc2ecc-019c-4015-b116-ae0273eb9713","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-04-09T15:05:17Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6acc2ecc-019c-4015-b116-ae0273eb9713\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","kubectl.kubernetes.io/default-container":"cilium-agent","prometheus.io/port":"9090","prometheus.io/scrape":"true"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"}},"spec":{"containers":[{"command":["/arp-flusher"],"image":"docker.io/digitalocean/arp-flusher:v0.0.2","imagePullPolicy":"IfNotPresent","name":"arp-flusher","resources":{"limits":{"cpu":"100m","memory":"75Mi"},"requests":{"cpu":"10m","memory":"10Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"},{"command":["/bin/bash","-ec","ip -statistics -statistics neigh flush nud permanent\nexec cilium-agent \\\n  --kvstore=etcd \\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\n  --config-dir=/tmp/cilium/config-map \\\n  --arping-refresh-period=30s\n"],"env":[{"name":"K8S_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"CILIUM_K8S_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"CILIUM_FLANNEL_MASTER_DEVICE","valueFrom":{"configMapKeyRef":{"key":"flannel-master-device","name":"cilium-config","optional":true}}},{"name":"CILIUM_FLANNEL_UNINSTALL_ON_EXIT","valueFrom":{"configMapKeyRef":{"key":"flannel-uninstall-on-exit","name":"cilium-config","optional":true}}},{"name":"CILIUM_CLUSTERMESH_CONFIG","value":"/var/lib/cilium/clustermesh/"},{"name":"CILIUM_CNI_CHAINING_MODE","valueFrom":{"configMapKeyRef":{"key":"cni-chaining-mode","name":"cilium-config","optional":true}}},{"name":"CILIUM_CUSTOM_CNI_CONF","valueFrom":{"configMapKeyRef":{"key":"custom-cni-conf","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"quay.io/cilium/cilium:v1.10.4","imagePullPolicy":"IfNotPresent","lifecycle":{"postStart":{"exec":{"command":["/cni-install.sh"]}},"preStop":{"exec":{"command":["/cni-uninstall.sh"]}}},"livenessProbe":{"failureThreshold":10,"httpGet":{"host":"127.0.0.1","httpHeaders":[{"name":"brief","value":"true"}],"path":"/healthz","port":9876,"scheme":"HTTP"},"initialDelaySeconds":120,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"name":"cilium-agent","ports":[{"containerPort":9090,"hostPort":9090,"name":"prometheus","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["cilium","status","--brief"]},"failureThreshold":3,"initialDelaySeconds":5,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"300m","memory":"300Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"},{"mountPath":"/host/opt/cni/bin","name":"cni-path"},{"mountPath":"/host/etc/cni/net.d","name":"etc-cni-netd"},{"mountPath":"/var/lib/etcd-config","name":"etcd-config-path","readOnly":true},{"mountPath":"/var/lib/etcd-secrets","name":"etcd-secrets","readOnly":true},{"mountPath":"/var/lib/cilium/clustermesh","name":"clustermesh-secrets","readOnly":true},{"mountPath":"/tmp/cilium/config-map","name":"cilium-config-path","readOnly":true},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["bash","-e","-c","# This will get the node object for the local node and search through\n# the assigned addresses in the object in order to check whether CCM\n# already set the internal AND external IP since cilium needs both\n# for a clean startup.\n# The grep matches regardless of the order of IPs.\nuntil /host/usr/bin/kubectl get node ${HOSTNAME} -o jsonpath=\"{.status.addresses[*].type}\" | grep -E \"InternalIP.*ExternalIP|ExternalIP.*InternalIP\"; do echo \"waiting for CCM to store internal and external IP addresses in node object: ${HOSTNAME}\" \u0026\u0026 sleep 3; done;\n"],"image":"quay.io/cilium/cilium:v1.10.4","imagePullPolicy":"IfNotPresent","name":"delay-cilium-for-ccm","resources":{"requests":{"cpu":"100m","memory":"100Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/host/usr/bin/kubectl","name":"host-kubectl"}]},{"command":["/init-container.sh"],"env":[{"name":"CILIUM_ALL_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_BPF_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-bpf-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_WAIT_BPF_MOUNT","valueFrom":{"configMapKeyRef":{"key":"wait-bpf-mount","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"quay.io/cilium/cilium-init:2019-04-05","imagePullPolicy":"IfNotPresent","name":"clean-cilium-state","resources":{},"securityContext":{"capabilities":{"add":["NET_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","mountPropagation":"HostToContainer","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cilium","serviceAccountName":"cilium","terminationGracePeriodSeconds":1,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/run/cilium","type":"DirectoryOrCreate"},"name":"cilium-run"},{"hostPath":{"path":"/sys/fs/bpf","type":"DirectoryOrCreate"},"name":"bpf-maps"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-path"},{"hostPath":{"path":"/etc/cni/net.d","type":"DirectoryOrCreate"},"name":"etc-cni-netd"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"configMap":{"defaultMode":420,"items":[{"key":"etcd-config","path":"etcd.config"}],"name":"cilium-config"},"name":"etcd-config-path"},{"name":"etcd-secrets","secret":{"defaultMode":420,"items":[{"key":"etcd-ca","path":"etcd-client-ca.crt"},{"key":"etcd-key","path":"etcd-client.key"},{"key":"etcd-cert","path":"etcd-client.crt"}],"secretName":"etcd-secrets"}},{"name":"clustermesh-secrets","secret":{"defaultMode":420,"optional":true,"secretName":"cilium-clustermesh"}},{"configMap":{"defaultMode":420,"name":"cilium-config"},"name":"cilium-config-path"},{"hostPath":{"path":"/usr/bin/kubectl","type":"File"},"name":"host-kubectl"}]}}}},"revision":8},{"metadata":{"name":"cilium-7f9bc95dbc","namespace":"kube-system","uid":"4a568af5-bc82-48dd-8c0d-96945b51d901","resourceVersion":"47398395","creationTimestamp":"2022-04-30T15:00:47Z","labels":{"controller-revision-hash":"7f9bc95dbc","doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"},"annotations":{"deprecated.daemonset.template.generation":"7","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cilium\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"kubectl.kubernetes.io/default-container\":\"cilium-agent\",\"prometheus.io/port\":\"9090\",\"prometheus.io/scrape\":\"true\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"spec\":{\"containers\":[{\"command\":[\"/arp-flusher\"],\"image\":\"docker.io/digitalocean/arp-flusher:v0.0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"arp-flusher\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"75Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true}},{\"command\":[\"/bin/bash\",\"-ec\",\"ip -statistics -statistics neigh flush nud permanent\\nexec cilium-agent \\\\\\n  --kvstore=etcd \\\\\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\\\\n  --config-dir=/tmp/cilium/config-map \\\\\\n  --arping-refresh-period=30s\\n\"],\"env\":[{\"name\":\"K8S_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"CILIUM_K8S_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CILIUM_FLANNEL_MASTER_DEVICE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-master-device\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_FLANNEL_UNINSTALL_ON_EXIT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-uninstall-on-exit\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CLUSTERMESH_CONFIG\",\"value\":\"/var/lib/cilium/clustermesh/\"},{\"name\":\"CILIUM_CNI_CHAINING_MODE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"cni-chaining-mode\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CUSTOM_CNI_CONF\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"custom-cni-conf\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"quay.io/cilium/cilium:v1.10.4\",\"imagePullPolicy\":\"IfNotPresent\",\"lifecycle\":{\"postStart\":{\"exec\":{\"command\":[\"/cni-install.sh\"]}},\"preStop\":{\"exec\":{\"command\":[\"/cni-uninstall.sh\"]}}},\"livenessProbe\":{\"failureThreshold\":10,\"httpGet\":{\"host\":\"127.0.0.1\",\"httpHeaders\":[{\"name\":\"brief\",\"value\":\"true\"}],\"path\":\"/healthz\",\"port\":9876,\"scheme\":\"HTTP\"},\"initialDelaySeconds\":120,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"name\":\"cilium-agent\",\"ports\":[{\"containerPort\":9090,\"hostPort\":9090,\"name\":\"prometheus\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"exec\":{\"command\":[\"cilium\",\"status\",\"--brief\"]},\"failureThreshold\":3,\"initialDelaySeconds\":5,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"cni-path\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"etc-cni-netd\"},{\"mountPath\":\"/var/lib/etcd-config\",\"name\":\"etcd-config-path\",\"readOnly\":true},{\"mountPath\":\"/var/lib/etcd-secrets\",\"name\":\"etcd-secrets\",\"readOnly\":true},{\"mountPath\":\"/var/lib/cilium/clustermesh\",\"name\":\"clustermesh-secrets\",\"readOnly\":true},{\"mountPath\":\"/tmp/cilium/config-map\",\"name\":\"cilium-config-path\",\"readOnly\":true},{\"mountPath\":\"/lib/modules\",\"name\":\"lib-modules\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]}],\"dnsPolicy\":\"ClusterFirst\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"bash\",\"-e\",\"-c\",\"# This will get the node object for the local node and search through\\n# the assigned addresses in the object in order to check whether CCM\\n# already set the internal AND external IP since cilium needs both\\n# for a clean startup.\\n# The grep matches regardless of the order of IPs.\\nuntil /host/usr/bin/kubectl get node ${HOSTNAME} -o jsonpath=\\\"{.status.addresses[*].type}\\\" | grep -E \\\"InternalIP.*ExternalIP|ExternalIP.*InternalIP\\\"; do echo \\\"waiting for CCM to store internal and external IP addresses in node object: ${HOSTNAME}\\\" \\u0026\\u0026 sleep 3; done;\\n\"],\"image\":\"quay.io/cilium/cilium:v1.10.4\",\"name\":\"delay-cilium-for-ccm\",\"resources\":{\"requests\":{\"cpu\":\"100m\",\"memory\":\"100Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/host/usr/bin/kubectl\",\"name\":\"host-kubectl\"}]},{\"command\":[\"/init-container.sh\"],\"env\":[{\"name\":\"CILIUM_ALL_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_BPF_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-bpf-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_WAIT_BPF_MOUNT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"wait-bpf-mount\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"quay.io/cilium/cilium-init:2019-04-05\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"clean-cilium-state\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"mountPropagation\":\"HostToContainer\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"}]}],\"priorityClassName\":\"system-node-critical\",\"restartPolicy\":\"Always\",\"serviceAccount\":\"cilium\",\"serviceAccountName\":\"cilium\",\"terminationGracePeriodSeconds\":1,\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/run/cilium\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cilium-run\"},{\"hostPath\":{\"path\":\"/sys/fs/bpf\",\"type\":\"DirectoryOrCreate\"},\"name\":\"bpf-maps\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cni-path\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\",\"type\":\"DirectoryOrCreate\"},\"name\":\"etc-cni-netd\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"},{\"configMap\":{\"defaultMode\":420,\"items\":[{\"key\":\"etcd-config\",\"path\":\"etcd.config\"}],\"name\":\"cilium-config\"},\"name\":\"etcd-config-path\"},{\"name\":\"etcd-secrets\",\"secret\":{\"items\":[{\"key\":\"etcd-ca\",\"path\":\"etcd-client-ca.crt\"},{\"key\":\"etcd-key\",\"path\":\"etcd-client.key\"},{\"key\":\"etcd-cert\",\"path\":\"etcd-client.crt\"}],\"secretName\":\"etcd-secrets\"}},{\"name\":\"clustermesh-secrets\",\"secret\":{\"defaultMode\":420,\"optional\":true,\"secretName\":\"cilium-clustermesh\"}},{\"configMap\":{\"name\":\"cilium-config\"},\"name\":\"cilium-config-path\"},{\"hostPath\":{\"path\":\"/usr/bin/kubectl\",\"type\":\"File\"},\"name\":\"host-kubectl\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"cilium","uid":"6acc2ecc-019c-4015-b116-ae0273eb9713","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-04-30T15:00:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6acc2ecc-019c-4015-b116-ae0273eb9713\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","kubectl.kubernetes.io/default-container":"cilium-agent","prometheus.io/port":"9090","prometheus.io/scrape":"true"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"}},"spec":{"containers":[{"command":["/arp-flusher"],"image":"docker.io/digitalocean/arp-flusher:v0.0.2","imagePullPolicy":"IfNotPresent","name":"arp-flusher","resources":{"limits":{"cpu":"100m","memory":"75Mi"},"requests":{"cpu":"10m","memory":"10Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"},{"command":["/bin/bash","-ec","ip -statistics -statistics neigh flush nud permanent\nexec cilium-agent \\\n  --kvstore=etcd \\\n  --kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config \\\n  --config-dir=/tmp/cilium/config-map \\\n  --arping-refresh-period=30s \\\n  --enable-node-port=false \\\n  --enable-host-port=false \\\n  --enable-external-ips=false\n"],"env":[{"name":"K8S_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"CILIUM_K8S_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"CILIUM_FLANNEL_MASTER_DEVICE","valueFrom":{"configMapKeyRef":{"key":"flannel-master-device","name":"cilium-config","optional":true}}},{"name":"CILIUM_FLANNEL_UNINSTALL_ON_EXIT","valueFrom":{"configMapKeyRef":{"key":"flannel-uninstall-on-exit","name":"cilium-config","optional":true}}},{"name":"CILIUM_CLUSTERMESH_CONFIG","value":"/var/lib/cilium/clustermesh/"},{"name":"CILIUM_CNI_CHAINING_MODE","valueFrom":{"configMapKeyRef":{"key":"cni-chaining-mode","name":"cilium-config","optional":true}}},{"name":"CILIUM_CUSTOM_CNI_CONF","valueFrom":{"configMapKeyRef":{"key":"custom-cni-conf","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"quay.io/cilium/cilium:v1.10.4","imagePullPolicy":"IfNotPresent","lifecycle":{"postStart":{"exec":{"command":["/cni-install.sh"]}},"preStop":{"exec":{"command":["/cni-uninstall.sh"]}}},"livenessProbe":{"failureThreshold":10,"httpGet":{"host":"127.0.0.1","httpHeaders":[{"name":"brief","value":"true"}],"path":"/healthz","port":9876,"scheme":"HTTP"},"initialDelaySeconds":120,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"name":"cilium-agent","ports":[{"containerPort":9090,"hostPort":9090,"name":"prometheus","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["cilium","status","--brief"]},"failureThreshold":3,"initialDelaySeconds":5,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"300m","memory":"300Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"},{"mountPath":"/host/opt/cni/bin","name":"cni-path"},{"mountPath":"/host/etc/cni/net.d","name":"etc-cni-netd"},{"mountPath":"/var/lib/etcd-config","name":"etcd-config-path","readOnly":true},{"mountPath":"/var/lib/etcd-secrets","name":"etcd-secrets","readOnly":true},{"mountPath":"/var/lib/cilium/clustermesh","name":"clustermesh-secrets","readOnly":true},{"mountPath":"/tmp/cilium/config-map","name":"cilium-config-path","readOnly":true},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["bash","-e","-c","# This will get the node object for the local node and search through\n# the assigned addresses in the object in order to check whether CCM\n# already set the internal AND external IP since cilium needs both\n# for a clean startup.\n# The grep matches regardless of the order of IPs.\nuntil /host/usr/bin/kubectl get node ${HOSTNAME} -o jsonpath=\"{.status.addresses[*].type}\" | grep -E \"InternalIP.*ExternalIP|ExternalIP.*InternalIP\"; do echo \"waiting for CCM to store internal and external IP addresses in node object: ${HOSTNAME}\" \u0026\u0026 sleep 3; done;\n"],"image":"quay.io/cilium/cilium:v1.10.4","imagePullPolicy":"IfNotPresent","name":"delay-cilium-for-ccm","resources":{"requests":{"cpu":"100m","memory":"100Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/host/usr/bin/kubectl","name":"host-kubectl"}]},{"command":["/init-container.sh"],"env":[{"name":"CILIUM_ALL_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_BPF_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-bpf-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_WAIT_BPF_MOUNT","valueFrom":{"configMapKeyRef":{"key":"wait-bpf-mount","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"quay.io/cilium/cilium-init:2019-04-05","imagePullPolicy":"IfNotPresent","name":"clean-cilium-state","resources":{},"securityContext":{"capabilities":{"add":["NET_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","mountPropagation":"HostToContainer","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cilium","serviceAccountName":"cilium","terminationGracePeriodSeconds":1,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/run/cilium","type":"DirectoryOrCreate"},"name":"cilium-run"},{"hostPath":{"path":"/sys/fs/bpf","type":"DirectoryOrCreate"},"name":"bpf-maps"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-path"},{"hostPath":{"path":"/etc/cni/net.d","type":"DirectoryOrCreate"},"name":"etc-cni-netd"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"configMap":{"defaultMode":420,"items":[{"key":"etcd-config","path":"etcd.config"}],"name":"cilium-config"},"name":"etcd-config-path"},{"name":"etcd-secrets","secret":{"defaultMode":420,"items":[{"key":"etcd-ca","path":"etcd-client-ca.crt"},{"key":"etcd-key","path":"etcd-client.key"},{"key":"etcd-cert","path":"etcd-client.crt"}],"secretName":"etcd-secrets"}},{"name":"clustermesh-secrets","secret":{"defaultMode":420,"optional":true,"secretName":"cilium-clustermesh"}},{"configMap":{"defaultMode":420,"name":"cilium-config"},"name":"cilium-config-path"},{"hostPath":{"path":"/usr/bin/kubectl","type":"File"},"name":"host-kubectl"}]}}}},"revision":9},{"metadata":{"name":"cilium-869547f4ff","namespace":"kube-system","uid":"d55dc56b-b055-4c31-9f82-9881ce4e9bc3","resourceVersion":"15069743","creationTimestamp":"2022-01-15T15:00:35Z","labels":{"controller-revision-hash":"869547f4ff","doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"},"annotations":{"deprecated.daemonset.template.generation":"3","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cilium\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"prometheus.io/port\":\"9090\",\"prometheus.io/scrape\":\"true\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"spec\":{\"containers\":[{\"args\":[\"--kvstore=etcd\",\"--kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config\",\"--config-dir=/tmp/cilium/config-map\"],\"command\":[\"cilium-agent\"],\"env\":[{\"name\":\"K8S_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"CILIUM_K8S_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CILIUM_FLANNEL_MASTER_DEVICE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-master-device\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_FLANNEL_UNINSTALL_ON_EXIT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-uninstall-on-exit\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CLUSTERMESH_CONFIG\",\"value\":\"/var/lib/cilium/clustermesh/\"},{\"name\":\"CILIUM_CNI_CHAINING_MODE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"cni-chaining-mode\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CUSTOM_CNI_CONF\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"custom-cni-conf\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/digitalocean/cilium:1.10.1-con-4989\",\"imagePullPolicy\":\"IfNotPresent\",\"lifecycle\":{\"postStart\":{\"exec\":{\"command\":[\"/cni-install.sh\"]}},\"preStop\":{\"exec\":{\"command\":[\"/cni-uninstall.sh\"]}}},\"livenessProbe\":{\"failureThreshold\":10,\"httpGet\":{\"host\":\"127.0.0.1\",\"httpHeaders\":[{\"name\":\"brief\",\"value\":\"true\"}],\"path\":\"/healthz\",\"port\":9876,\"scheme\":\"HTTP\"},\"initialDelaySeconds\":120,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"name\":\"cilium-agent\",\"ports\":[{\"containerPort\":9090,\"hostPort\":9090,\"name\":\"prometheus\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"exec\":{\"command\":[\"cilium\",\"status\",\"--brief\"]},\"failureThreshold\":3,\"initialDelaySeconds\":5,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"cni-path\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"etc-cni-netd\"},{\"mountPath\":\"/var/lib/etcd-config\",\"name\":\"etcd-config-path\",\"readOnly\":true},{\"mountPath\":\"/var/lib/etcd-secrets\",\"name\":\"etcd-secrets\",\"readOnly\":true},{\"mountPath\":\"/var/lib/cilium/clustermesh\",\"name\":\"clustermesh-secrets\",\"readOnly\":true},{\"mountPath\":\"/tmp/cilium/config-map\",\"name\":\"cilium-config-path\",\"readOnly\":true},{\"mountPath\":\"/lib/modules\",\"name\":\"lib-modules\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]}],\"dnsPolicy\":\"ClusterFirst\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"/init-container.sh\"],\"env\":[{\"name\":\"CILIUM_ALL_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_BPF_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-bpf-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_WAIT_BPF_MOUNT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"wait-bpf-mount\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/cilium/cilium-init:2019-04-05\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"clean-cilium-state\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"mountPropagation\":\"HostToContainer\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"}]}],\"priorityClassName\":\"system-node-critical\",\"restartPolicy\":\"Always\",\"serviceAccount\":\"cilium\",\"serviceAccountName\":\"cilium\",\"terminationGracePeriodSeconds\":1,\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/run/cilium\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cilium-run\"},{\"hostPath\":{\"path\":\"/sys/fs/bpf\",\"type\":\"DirectoryOrCreate\"},\"name\":\"bpf-maps\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cni-path\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\",\"type\":\"DirectoryOrCreate\"},\"name\":\"etc-cni-netd\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"},{\"configMap\":{\"defaultMode\":420,\"items\":[{\"key\":\"etcd-config\",\"path\":\"etcd.config\"}],\"name\":\"cilium-config\"},\"name\":\"etcd-config-path\"},{\"name\":\"etcd-secrets\",\"secret\":{\"items\":[{\"key\":\"etcd-ca\",\"path\":\"etcd-client-ca.crt\"},{\"key\":\"etcd-key\",\"path\":\"etcd-client.key\"},{\"key\":\"etcd-cert\",\"path\":\"etcd-client.crt\"}],\"secretName\":\"etcd-secrets\"}},{\"name\":\"clustermesh-secrets\",\"secret\":{\"defaultMode\":420,\"optional\":true,\"secretName\":\"cilium-clustermesh\"}},{\"configMap\":{\"name\":\"cilium-config\"},\"name\":\"cilium-config-path\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"cilium","uid":"6acc2ecc-019c-4015-b116-ae0273eb9713","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-01-15T15:00:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6acc2ecc-019c-4015-b116-ae0273eb9713\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","prometheus.io/port":"9090","prometheus.io/scrape":"true"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"}},"spec":{"containers":[{"command":["/arp-flusher"],"image":"docker.io/digitalocean/arp-flusher:v0.0.1","imagePullPolicy":"IfNotPresent","name":"arp-flusher","resources":{"limits":{"cpu":"100m","memory":"75Mi"},"requests":{"cpu":"10m","memory":"10Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File"},{"args":["--kvstore=etcd","--kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config","--config-dir=/tmp/cilium/config-map","--enable-node-port=true","--enable-host-port=true","--enable-health-check-nodeport=false","--kube-proxy-replacement=partial","--enable-host-reachable-services=false","--enable-egress-gateway=false","--arping-refresh-period=30s"],"command":["cilium-agent"],"env":[{"name":"K8S_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"CILIUM_K8S_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"CILIUM_FLANNEL_MASTER_DEVICE","valueFrom":{"configMapKeyRef":{"key":"flannel-master-device","name":"cilium-config","optional":true}}},{"name":"CILIUM_FLANNEL_UNINSTALL_ON_EXIT","valueFrom":{"configMapKeyRef":{"key":"flannel-uninstall-on-exit","name":"cilium-config","optional":true}}},{"name":"CILIUM_CLUSTERMESH_CONFIG","value":"/var/lib/cilium/clustermesh/"},{"name":"CILIUM_CNI_CHAINING_MODE","valueFrom":{"configMapKeyRef":{"key":"cni-chaining-mode","name":"cilium-config","optional":true}}},{"name":"CILIUM_CUSTOM_CNI_CONF","valueFrom":{"configMapKeyRef":{"key":"custom-cni-conf","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"digitalocean/cilium:1.10.1-con-4989-actual","imagePullPolicy":"IfNotPresent","lifecycle":{"postStart":{"exec":{"command":["/cni-install.sh"]}},"preStop":{"exec":{"command":["/cni-uninstall.sh"]}}},"livenessProbe":{"failureThreshold":10,"httpGet":{"host":"127.0.0.1","httpHeaders":[{"name":"brief","value":"true"}],"path":"/healthz","port":9876,"scheme":"HTTP"},"initialDelaySeconds":120,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"name":"cilium-agent","ports":[{"containerPort":9090,"hostPort":9090,"name":"prometheus","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["cilium","status","--brief"]},"failureThreshold":3,"initialDelaySeconds":5,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"300m","memory":"300Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"},{"mountPath":"/host/opt/cni/bin","name":"cni-path"},{"mountPath":"/host/etc/cni/net.d","name":"etc-cni-netd"},{"mountPath":"/var/lib/etcd-config","name":"etcd-config-path","readOnly":true},{"mountPath":"/var/lib/etcd-secrets","name":"etcd-secrets","readOnly":true},{"mountPath":"/var/lib/cilium/clustermesh","name":"clustermesh-secrets","readOnly":true},{"mountPath":"/tmp/cilium/config-map","name":"cilium-config-path","readOnly":true},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["/init-container.sh"],"env":[{"name":"CILIUM_ALL_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_BPF_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-bpf-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_WAIT_BPF_MOUNT","valueFrom":{"configMapKeyRef":{"key":"wait-bpf-mount","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/cilium/cilium-init:2019-04-05","imagePullPolicy":"IfNotPresent","name":"clean-cilium-state","resources":{},"securityContext":{"capabilities":{"add":["NET_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","mountPropagation":"HostToContainer","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cilium","serviceAccountName":"cilium","terminationGracePeriodSeconds":1,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/run/cilium","type":"DirectoryOrCreate"},"name":"cilium-run"},{"hostPath":{"path":"/sys/fs/bpf","type":"DirectoryOrCreate"},"name":"bpf-maps"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-path"},{"hostPath":{"path":"/etc/cni/net.d","type":"DirectoryOrCreate"},"name":"etc-cni-netd"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"configMap":{"defaultMode":420,"items":[{"key":"etcd-config","path":"etcd.config"}],"name":"cilium-config"},"name":"etcd-config-path"},{"name":"etcd-secrets","secret":{"defaultMode":420,"items":[{"key":"etcd-ca","path":"etcd-client-ca.crt"},{"key":"etcd-key","path":"etcd-client.key"},{"key":"etcd-cert","path":"etcd-client.crt"}],"secretName":"etcd-secrets"}},{"name":"clustermesh-secrets","secret":{"defaultMode":420,"optional":true,"secretName":"cilium-clustermesh"}},{"configMap":{"defaultMode":420,"name":"cilium-config"},"name":"cilium-config-path"}]}}}},"revision":3},{"metadata":{"name":"cilium-8f84454bd","namespace":"kube-system","uid":"f4fc0e46-f15b-42e3-b127-e2357c55932d","resourceVersion":"522","creationTimestamp":"2021-11-26T10:27:33Z","labels":{"controller-revision-hash":"8f84454bd","doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"},"annotations":{"deprecated.daemonset.template.generation":"2","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"cilium\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"prometheus.io/port\":\"9090\",\"prometheus.io/scrape\":\"true\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"cilium\",\"kubernetes.io/cluster-service\":\"true\"}},\"spec\":{\"containers\":[{\"args\":[\"--kvstore=etcd\",\"--kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config\",\"--config-dir=/tmp/cilium/config-map\"],\"command\":[\"cilium-agent\"],\"env\":[{\"name\":\"K8S_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"spec.nodeName\"}}},{\"name\":\"CILIUM_K8S_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"CILIUM_FLANNEL_MASTER_DEVICE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-master-device\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_FLANNEL_UNINSTALL_ON_EXIT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"flannel-uninstall-on-exit\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CLUSTERMESH_CONFIG\",\"value\":\"/var/lib/cilium/clustermesh/\"},{\"name\":\"CILIUM_CNI_CHAINING_MODE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"cni-chaining-mode\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_CUSTOM_CNI_CONF\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"custom-cni-conf\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/digitalocean/cilium:1.10.1-con-4989\",\"imagePullPolicy\":\"IfNotPresent\",\"lifecycle\":{\"postStart\":{\"exec\":{\"command\":[\"/cni-install.sh\"]}},\"preStop\":{\"exec\":{\"command\":[\"/cni-uninstall.sh\"]}}},\"livenessProbe\":{\"failureThreshold\":10,\"httpGet\":{\"host\":\"127.0.0.1\",\"httpHeaders\":[{\"name\":\"brief\",\"value\":\"true\"}],\"path\":\"/healthz\",\"port\":9876,\"scheme\":\"HTTP\"},\"initialDelaySeconds\":120,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"name\":\"cilium-agent\",\"ports\":[{\"containerPort\":9090,\"hostPort\":9090,\"name\":\"prometheus\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"exec\":{\"command\":[\"cilium\",\"status\",\"--brief\"]},\"failureThreshold\":3,\"initialDelaySeconds\":5,\"periodSeconds\":30,\"successThreshold\":1,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\",\"SYS_MODULE\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"cni-path\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"etc-cni-netd\"},{\"mountPath\":\"/var/lib/etcd-config\",\"name\":\"etcd-config-path\",\"readOnly\":true},{\"mountPath\":\"/var/lib/etcd-secrets\",\"name\":\"etcd-secrets\",\"readOnly\":true},{\"mountPath\":\"/var/lib/cilium/clustermesh\",\"name\":\"clustermesh-secrets\",\"readOnly\":true},{\"mountPath\":\"/tmp/cilium/config-map\",\"name\":\"cilium-config-path\",\"readOnly\":true},{\"mountPath\":\"/lib/modules\",\"name\":\"lib-modules\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]}],\"dnsPolicy\":\"ClusterFirst\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"/init-container.sh\"],\"env\":[{\"name\":\"CILIUM_ALL_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_BPF_STATE\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"clean-cilium-bpf-state\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"CILIUM_WAIT_BPF_MOUNT\",\"valueFrom\":{\"configMapKeyRef\":{\"key\":\"wait-bpf-mount\",\"name\":\"cilium-config\",\"optional\":true}}},{\"name\":\"KUBERNETES_SERVICE_HOST\",\"value\":\"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com\"},{\"name\":\"KUBERNETES_SERVICE_PORT\",\"value\":\"443\"}],\"image\":\"docker.io/cilium/cilium-init:2019-04-05\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"clean-cilium-state\",\"securityContext\":{\"capabilities\":{\"add\":[\"NET_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/sys/fs/bpf\",\"mountPropagation\":\"HostToContainer\",\"name\":\"bpf-maps\"},{\"mountPath\":\"/var/run/cilium\",\"name\":\"cilium-run\"}]}],\"priorityClassName\":\"system-node-critical\",\"restartPolicy\":\"Always\",\"serviceAccount\":\"cilium\",\"serviceAccountName\":\"cilium\",\"terminationGracePeriodSeconds\":1,\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/run/cilium\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cilium-run\"},{\"hostPath\":{\"path\":\"/sys/fs/bpf\",\"type\":\"DirectoryOrCreate\"},\"name\":\"bpf-maps\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\",\"type\":\"DirectoryOrCreate\"},\"name\":\"cni-path\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\",\"type\":\"DirectoryOrCreate\"},\"name\":\"etc-cni-netd\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"},{\"configMap\":{\"defaultMode\":420,\"items\":[{\"key\":\"etcd-config\",\"path\":\"etcd.config\"}],\"name\":\"cilium-config\"},\"name\":\"etcd-config-path\"},{\"name\":\"etcd-secrets\",\"secret\":{\"items\":[{\"key\":\"etcd-ca\",\"path\":\"etcd-client-ca.crt\"},{\"key\":\"etcd-key\",\"path\":\"etcd-client.key\"},{\"key\":\"etcd-cert\",\"path\":\"etcd-client.crt\"}],\"secretName\":\"etcd-secrets\"}},{\"name\":\"clustermesh-secrets\",\"secret\":{\"defaultMode\":420,\"optional\":true,\"secretName\":\"cilium-clustermesh\"}},{\"configMap\":{\"name\":\"cilium-config\"},\"name\":\"cilium-config-path\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"cilium","uid":"6acc2ecc-019c-4015-b116-ae0273eb9713","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-11-26T10:27:33Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6acc2ecc-019c-4015-b116-ae0273eb9713\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","prometheus.io/port":"9090","prometheus.io/scrape":"true"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"cilium","kubernetes.io/cluster-service":"true"}},"spec":{"containers":[{"args":["--kvstore=etcd","--kvstore-opt=etcd.config=/var/lib/etcd-config/etcd.config","--config-dir=/tmp/cilium/config-map","--enable-node-port=true","--enable-host-port=true","--enable-health-check-nodeport=false","--kube-proxy-replacement=partial","--enable-host-reachable-services=false","--enable-egress-gateway=false","--arping-refresh-period=30s"],"command":["cilium-agent"],"env":[{"name":"K8S_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"CILIUM_K8S_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"CILIUM_FLANNEL_MASTER_DEVICE","valueFrom":{"configMapKeyRef":{"key":"flannel-master-device","name":"cilium-config","optional":true}}},{"name":"CILIUM_FLANNEL_UNINSTALL_ON_EXIT","valueFrom":{"configMapKeyRef":{"key":"flannel-uninstall-on-exit","name":"cilium-config","optional":true}}},{"name":"CILIUM_CLUSTERMESH_CONFIG","value":"/var/lib/cilium/clustermesh/"},{"name":"CILIUM_CNI_CHAINING_MODE","valueFrom":{"configMapKeyRef":{"key":"cni-chaining-mode","name":"cilium-config","optional":true}}},{"name":"CILIUM_CUSTOM_CNI_CONF","valueFrom":{"configMapKeyRef":{"key":"custom-cni-conf","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"digitalocean/cilium:1.10.1-con-4989-actual","imagePullPolicy":"IfNotPresent","lifecycle":{"postStart":{"exec":{"command":["/cni-install.sh"]}},"preStop":{"exec":{"command":["/cni-uninstall.sh"]}}},"livenessProbe":{"failureThreshold":10,"httpGet":{"host":"127.0.0.1","httpHeaders":[{"name":"brief","value":"true"}],"path":"/healthz","port":9876,"scheme":"HTTP"},"initialDelaySeconds":120,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"name":"cilium-agent","ports":[{"containerPort":9090,"hostPort":9090,"name":"prometheus","protocol":"TCP"}],"readinessProbe":{"exec":{"command":["cilium","status","--brief"]},"failureThreshold":3,"initialDelaySeconds":5,"periodSeconds":30,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"300m","memory":"300Mi"}},"securityContext":{"capabilities":{"add":["NET_ADMIN","SYS_MODULE"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"},{"mountPath":"/host/opt/cni/bin","name":"cni-path"},{"mountPath":"/host/etc/cni/net.d","name":"etc-cni-netd"},{"mountPath":"/var/lib/etcd-config","name":"etcd-config-path","readOnly":true},{"mountPath":"/var/lib/etcd-secrets","name":"etcd-secrets","readOnly":true},{"mountPath":"/var/lib/cilium/clustermesh","name":"clustermesh-secrets","readOnly":true},{"mountPath":"/tmp/cilium/config-map","name":"cilium-config-path","readOnly":true},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["/init-container.sh"],"env":[{"name":"CILIUM_ALL_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_BPF_STATE","valueFrom":{"configMapKeyRef":{"key":"clean-cilium-bpf-state","name":"cilium-config","optional":true}}},{"name":"CILIUM_WAIT_BPF_MOUNT","valueFrom":{"configMapKeyRef":{"key":"wait-bpf-mount","name":"cilium-config","optional":true}}},{"name":"KUBERNETES_SERVICE_HOST","value":"31e9afd3-a853-4f4a-8f92-f1aa29a91af5.internal.k8s.ondigitalocean.com"},{"name":"KUBERNETES_SERVICE_PORT","value":"443"}],"image":"docker.io/cilium/cilium-init:2019-04-05","imagePullPolicy":"IfNotPresent","name":"clean-cilium-state","resources":{},"securityContext":{"capabilities":{"add":["NET_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/sys/fs/bpf","mountPropagation":"HostToContainer","name":"bpf-maps"},{"mountPath":"/var/run/cilium","name":"cilium-run"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"cilium","serviceAccountName":"cilium","terminationGracePeriodSeconds":1,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/run/cilium","type":"DirectoryOrCreate"},"name":"cilium-run"},{"hostPath":{"path":"/sys/fs/bpf","type":"DirectoryOrCreate"},"name":"bpf-maps"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-path"},{"hostPath":{"path":"/etc/cni/net.d","type":"DirectoryOrCreate"},"name":"etc-cni-netd"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"configMap":{"defaultMode":420,"items":[{"key":"etcd-config","path":"etcd.config"}],"name":"cilium-config"},"name":"etcd-config-path"},{"name":"etcd-secrets","secret":{"defaultMode":420,"items":[{"key":"etcd-ca","path":"etcd-client-ca.crt"},{"key":"etcd-key","path":"etcd-client.key"},{"key":"etcd-cert","path":"etcd-client.crt"}],"secretName":"etcd-secrets"}},{"name":"clustermesh-secrets","secret":{"defaultMode":420,"optional":true,"secretName":"cilium-clustermesh"}},{"configMap":{"defaultMode":420,"name":"cilium-config"},"name":"cilium-config-path"}]}}}},"revision":2},{"metadata":{"name":"csi-do-node-847c7747","namespace":"kube-system","uid":"da05c097-f4fa-4e3e-82fb-7645b63f5052","resourceVersion":"21909250","creationTimestamp":"2022-02-05T15:04:48Z","labels":{"app":"csi-do-node","controller-revision-hash":"847c7747","doks.digitalocean.com/managed":"true","role":"csi-do"},"annotations":{"deprecated.daemonset.template.generation":"2","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\"},\"name\":\"csi-do-node\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"csi-do-node\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\",\"kubectl.kubernetes.io/default-container\":\"csi-do-plugin\"},\"labels\":{\"app\":\"csi-do-node\",\"doks.digitalocean.com/managed\":\"true\",\"role\":\"csi-do\"}},\"spec\":{\"containers\":[{\"args\":[\"--v=5\",\"--csi-address=$(ADDRESS)\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\"],\"env\":[{\"name\":\"ADDRESS\",\"value\":\"/csi/csi.sock\"},{\"name\":\"DRIVER_REG_SOCK_PATH\",\"value\":\"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com/csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.4.0\",\"lifecycle\":{\"preStop\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"rm -rf /registration/dobs.csi.digitalocean.com /registration/dobs.csi.digitalocean.com-reg.sock\"]}}},\"name\":\"csi-node-driver-registrar\",\"resources\":{\"requests\":{\"memory\":\"20Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/csi/\",\"name\":\"plugin-dir\"},{\"mountPath\":\"/registration/\",\"name\":\"registration-dir\"}]},{\"args\":[\"--endpoint=$(CSI_ENDPOINT)\",\"--url=$(DIGITALOCEAN_API_URL)\",\"--driver-name=dobs.csi.digitalocean.com\"],\"env\":[{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix:///csi/csi.sock\"},{\"name\":\"DIGITALOCEAN_API_URL\",\"value\":\"https://api.digitalocean.com\"}],\"image\":\"docker.io/digitalocean/do-csi-plugin:v3.0.0\",\"name\":\"csi-do-plugin\",\"resources\":{\"requests\":{\"memory\":\"50Mi\"}},\"securityContext\":{\"allowPrivilegeEscalation\":true,\"capabilities\":{\"add\":[\"SYS_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"plugin-dir\"},{\"mountPath\":\"/var/lib/kubelet\",\"mountPropagation\":\"Bidirectional\",\"name\":\"pods-mount-dir\"},{\"mountPath\":\"/dev\",\"name\":\"device-dir\"}]}],\"hostNetwork\":true,\"priorityClassName\":\"system-node-critical\",\"serviceAccount\":\"csi-do-node-sa\",\"tolerations\":[{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins_registry/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"registration-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com\",\"type\":\"DirectoryOrCreate\"},\"name\":\"plugin-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet\",\"type\":\"Directory\"},\"name\":\"pods-mount-dir\"},{\"hostPath\":{\"path\":\"/dev\"},\"name\":\"device-dir\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"csi-do-node","uid":"d2646ca7-bc13-4e7f-9090-40b6fb30b5c8","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-02-05T15:04:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:app":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:role":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d2646ca7-bc13-4e7f-9090-40b6fb30b5c8\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume","kubectl.kubernetes.io/default-container":"csi-do-plugin"},"creationTimestamp":null,"labels":{"app":"csi-do-node","doks.digitalocean.com/managed":"true","role":"csi-do"}},"spec":{"containers":[{"args":["--v=5","--csi-address=$(ADDRESS)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)"],"env":[{"name":"ADDRESS","value":"/csi/csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com/csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.4.0","imagePullPolicy":"IfNotPresent","lifecycle":{"preStop":{"exec":{"command":["/bin/sh","-c","rm -rf /registration/dobs.csi.digitalocean.com /registration/dobs.csi.digitalocean.com-reg.sock"]}}},"name":"csi-node-driver-registrar","resources":{"requests":{"memory":"20Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi/","name":"plugin-dir"},{"mountPath":"/registration/","name":"registration-dir"}]},{"args":["--endpoint=$(CSI_ENDPOINT)","--url=$(DIGITALOCEAN_API_URL)","--driver-name=dobs.csi.digitalocean.com"],"env":[{"name":"CSI_ENDPOINT","value":"unix:///csi/csi.sock"},{"name":"DIGITALOCEAN_API_URL","value":"https://api.digitalocean.com"}],"image":"docker.io/digitalocean/do-csi-plugin:v3.0.0","imagePullPolicy":"IfNotPresent","name":"csi-do-plugin","resources":{"requests":{"memory":"50Mi"}},"securityContext":{"allowPrivilegeEscalation":true,"capabilities":{"add":["SYS_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"plugin-dir"},{"mountPath":"/var/lib/kubelet","mountPropagation":"Bidirectional","name":"pods-mount-dir"},{"mountPath":"/dev","name":"device-dir"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"csi-do-node-sa","serviceAccountName":"csi-do-node-sa","terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"key":"CriticalAddonsOnly","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/lib/kubelet/plugins_registry/","type":"DirectoryOrCreate"},"name":"registration-dir"},{"hostPath":{"path":"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com","type":"DirectoryOrCreate"},"name":"plugin-dir"},{"hostPath":{"path":"/var/lib/kubelet","type":"Directory"},"name":"pods-mount-dir"},{"hostPath":{"path":"/dev","type":""},"name":"device-dir"}]}}}},"revision":2},{"metadata":{"name":"csi-do-node-84b78fffb8","namespace":"kube-system","uid":"31ea6474-9fef-44e3-b82f-5154290aa9ed","resourceVersion":"454","creationTimestamp":"2021-11-26T10:25:47Z","labels":{"app":"csi-do-node","controller-revision-hash":"84b78fffb8","doks.digitalocean.com/managed":"true","role":"csi-do"},"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\"},\"name\":\"csi-do-node\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"csi-do-node\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\"},\"labels\":{\"app\":\"csi-do-node\",\"doks.digitalocean.com/managed\":\"true\",\"role\":\"csi-do\"}},\"spec\":{\"containers\":[{\"args\":[\"--v=5\",\"--csi-address=$(ADDRESS)\",\"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\"],\"env\":[{\"name\":\"ADDRESS\",\"value\":\"/csi/csi.sock\"},{\"name\":\"DRIVER_REG_SOCK_PATH\",\"value\":\"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com/csi.sock\"},{\"name\":\"KUBE_NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.2.0\",\"lifecycle\":{\"preStop\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"rm -rf /registration/dobs.csi.digitalocean.com /registration/dobs.csi.digitalocean.com-reg.sock\"]}}},\"name\":\"csi-node-driver-registrar\",\"resources\":{\"requests\":{\"memory\":\"20Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/csi/\",\"name\":\"plugin-dir\"},{\"mountPath\":\"/registration/\",\"name\":\"registration-dir\"}]},{\"args\":[\"--endpoint=$(CSI_ENDPOINT)\",\"--url=$(DIGITALOCEAN_API_URL)\",\"--driver-name=dobs.csi.digitalocean.com\"],\"env\":[{\"name\":\"CSI_ENDPOINT\",\"value\":\"unix:///csi/csi.sock\"},{\"name\":\"DIGITALOCEAN_API_URL\",\"value\":\"https://api.digitalocean.com\"}],\"image\":\"docker.io/digitalocean/do-csi-plugin:v2.1.2\",\"name\":\"csi-do-plugin\",\"resources\":{\"requests\":{\"memory\":\"50Mi\"}},\"securityContext\":{\"allowPrivilegeEscalation\":true,\"capabilities\":{\"add\":[\"SYS_ADMIN\"]},\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/csi\",\"name\":\"plugin-dir\"},{\"mountPath\":\"/var/lib/kubelet\",\"mountPropagation\":\"Bidirectional\",\"name\":\"pods-mount-dir\"},{\"mountPath\":\"/dev\",\"name\":\"device-dir\"}]}],\"hostNetwork\":true,\"priorityClassName\":\"system-node-critical\",\"serviceAccount\":\"csi-do-node-sa\",\"tolerations\":[{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins_registry/\",\"type\":\"DirectoryOrCreate\"},\"name\":\"registration-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com\",\"type\":\"DirectoryOrCreate\"},\"name\":\"plugin-dir\"},{\"hostPath\":{\"path\":\"/var/lib/kubelet\",\"type\":\"Directory\"},\"name\":\"pods-mount-dir\"},{\"hostPath\":{\"path\":\"/dev\"},\"name\":\"device-dir\"}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"csi-do-node","uid":"d2646ca7-bc13-4e7f-9090-40b6fb30b5c8","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-11-26T10:25:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:app":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:role":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d2646ca7-bc13-4e7f-9090-40b6fb30b5c8\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume"},"creationTimestamp":null,"labels":{"app":"csi-do-node","doks.digitalocean.com/managed":"true","role":"csi-do"}},"spec":{"containers":[{"args":["--v=5","--csi-address=$(ADDRESS)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)"],"env":[{"name":"ADDRESS","value":"/csi/csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com/csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.2.0","imagePullPolicy":"IfNotPresent","lifecycle":{"preStop":{"exec":{"command":["/bin/sh","-c","rm -rf /registration/dobs.csi.digitalocean.com /registration/dobs.csi.digitalocean.com-reg.sock"]}}},"name":"csi-node-driver-registrar","resources":{"requests":{"memory":"20Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi/","name":"plugin-dir"},{"mountPath":"/registration/","name":"registration-dir"}]},{"args":["--endpoint=$(CSI_ENDPOINT)","--url=$(DIGITALOCEAN_API_URL)","--driver-name=dobs.csi.digitalocean.com"],"env":[{"name":"CSI_ENDPOINT","value":"unix:///csi/csi.sock"},{"name":"DIGITALOCEAN_API_URL","value":"https://api.digitalocean.com"}],"image":"docker.io/digitalocean/do-csi-plugin:v2.1.2","imagePullPolicy":"IfNotPresent","name":"csi-do-plugin","resources":{"requests":{"memory":"50Mi"}},"securityContext":{"allowPrivilegeEscalation":true,"capabilities":{"add":["SYS_ADMIN"]},"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/csi","name":"plugin-dir"},{"mountPath":"/var/lib/kubelet","mountPropagation":"Bidirectional","name":"pods-mount-dir"},{"mountPath":"/dev","name":"device-dir"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"csi-do-node-sa","serviceAccountName":"csi-do-node-sa","terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"key":"CriticalAddonsOnly","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/lib/kubelet/plugins_registry/","type":"DirectoryOrCreate"},"name":"registration-dir"},{"hostPath":{"path":"/var/lib/kubelet/plugins/dobs.csi.digitalocean.com","type":"DirectoryOrCreate"},"name":"plugin-dir"},{"hostPath":{"path":"/var/lib/kubelet","type":"Directory"},"name":"pods-mount-dir"},{"hostPath":{"path":"/dev","type":""},"name":"device-dir"}]}}}},"revision":1},{"metadata":{"name":"do-node-agent-56c999b454","namespace":"kube-system","uid":"d16e2101-c0b0-4a57-896c-293baa466049","resourceVersion":"465","creationTimestamp":"2021-11-26T10:25:48Z","labels":{"app":"do-node-agent","controller-revision-hash":"56c999b454","doks.digitalocean.com/managed":"true"},"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"do-node-agent\",\"doks.digitalocean.com/managed\":\"true\"},\"name\":\"do-node-agent\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"do-node-agent\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"hostpath-volume\"},\"labels\":{\"app\":\"do-node-agent\",\"doks.digitalocean.com/managed\":\"true\"}},\"spec\":{\"containers\":[{\"args\":[\"--path.procfs=/host/proc\",\"--path.sysfs=/host/sys\",\"--k8s-metrics-path=http://kube-state-metrics.kube-system.svc.cluster.local:8080/metrics\",\"--additional-label=kubernetes_cluster_uuid:31e9afd3-a853-4f4a-8f92-f1aa29a91af5\"],\"command\":[\"/bin/do-agent\"],\"image\":\"docker.io/digitalocean/do-agent:3\",\"name\":\"do-node-agent\",\"resources\":{\"limits\":{\"cpu\":\"102m\",\"memory\":\"100Mi\"},\"requests\":{\"cpu\":\"102m\",\"memory\":\"80Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/host/proc\",\"name\":\"proc\",\"readOnly\":true},{\"mountPath\":\"/host/sys\",\"name\":\"sys\",\"readOnly\":true},{\"mountPath\":\"/host/root\",\"mountPropagation\":\"HostToContainer\",\"name\":\"root\",\"readOnly\":true}]}],\"dnsPolicy\":\"ClusterFirstWithHostNet\",\"hostNetwork\":true,\"nodeSelector\":{\"beta.kubernetes.io/os\":\"linux\"},\"priorityClassName\":\"system-node-critical\",\"securityContext\":{\"runAsNonRoot\":true,\"runAsUser\":65534},\"serviceAccountName\":\"do-agent\",\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/proc\"},\"name\":\"proc\"},{\"hostPath\":{\"path\":\"/sys\"},\"name\":\"sys\"},{\"hostPath\":{\"path\":\"/\"},\"name\":\"root\"}]}}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"do-node-agent","uid":"203775c2-cf43-4d67-ab36-99423219e86f","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-11-26T10:25:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:app":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"203775c2-cf43-4d67-ab36-99423219e86f\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"hostpath-volume"},"creationTimestamp":null,"labels":{"app":"do-node-agent","doks.digitalocean.com/managed":"true"}},"spec":{"containers":[{"args":["--path.procfs=/host/proc","--path.sysfs=/host/sys","--k8s-metrics-path=http://kube-state-metrics.kube-system.svc.cluster.local:8080/metrics","--additional-label=kubernetes_cluster_uuid:31e9afd3-a853-4f4a-8f92-f1aa29a91af5"],"command":["/bin/do-agent"],"image":"docker.io/digitalocean/do-agent:3","imagePullPolicy":"IfNotPresent","name":"do-node-agent","resources":{"limits":{"cpu":"102m","memory":"100Mi"},"requests":{"cpu":"102m","memory":"80Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/host/proc","name":"proc","readOnly":true},{"mountPath":"/host/sys","name":"sys","readOnly":true},{"mountPath":"/host/root","mountPropagation":"HostToContainer","name":"root","readOnly":true}]}],"dnsPolicy":"ClusterFirstWithHostNet","hostNetwork":true,"nodeSelector":{"beta.kubernetes.io/os":"linux"},"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{"runAsNonRoot":true,"runAsUser":65534},"serviceAccount":"do-agent","serviceAccountName":"do-agent","terminationGracePeriodSeconds":30,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/proc","type":""},"name":"proc"},{"hostPath":{"path":"/sys","type":""},"name":"sys"},{"hostPath":{"path":"/","type":""},"name":"root"}]}}}},"revision":1},{"metadata":{"name":"do-node-agent-7878d6b47c","namespace":"kube-system","uid":"dc0b6db8-032b-4899-803e-37df619f1f2e","resourceVersion":"21909253","creationTimestamp":"2022-02-05T15:04:48Z","labels":{"app":"do-node-agent","controller-revision-hash":"7878d6b47c","doks.digitalocean.com/managed":"true"},"annotations":{"deprecated.daemonset.template.generation":"2","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"do-node-agent\",\"doks.digitalocean.com/managed\":\"true\"},\"name\":\"do-node-agent\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"do-node-agent\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"hostpath-volume\"},\"labels\":{\"app\":\"do-node-agent\",\"doks.digitalocean.com/managed\":\"true\"}},\"spec\":{\"containers\":[{\"args\":[\"--path.procfs=/host/proc\",\"--path.sysfs=/host/sys\",\"--k8s-metrics-path=http://kube-state-metrics.kube-system.svc.cluster.local:8080/metrics\",\"--additional-label=kubernetes_cluster_uuid:31e9afd3-a853-4f4a-8f92-f1aa29a91af5\"],\"command\":[\"/bin/do-agent\"],\"image\":\"docker.io/digitalocean/do-agent:3.11.0\",\"name\":\"do-node-agent\",\"resources\":{\"limits\":{\"cpu\":\"102m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"102m\",\"memory\":\"80Mi\"}},\"volumeMounts\":[{\"mountPath\":\"/host/proc\",\"name\":\"proc\",\"readOnly\":true},{\"mountPath\":\"/host/sys\",\"name\":\"sys\",\"readOnly\":true},{\"mountPath\":\"/host/root\",\"mountPropagation\":\"HostToContainer\",\"name\":\"root\",\"readOnly\":true}]}],\"dnsPolicy\":\"ClusterFirstWithHostNet\",\"hostNetwork\":true,\"nodeSelector\":{\"beta.kubernetes.io/os\":\"linux\"},\"priorityClassName\":\"system-node-critical\",\"securityContext\":{\"runAsNonRoot\":true,\"runAsUser\":65534},\"serviceAccountName\":\"do-agent\",\"tolerations\":[{\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/proc\"},\"name\":\"proc\"},{\"hostPath\":{\"path\":\"/sys\"},\"name\":\"sys\"},{\"hostPath\":{\"path\":\"/\"},\"name\":\"root\"}]}}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"do-node-agent","uid":"203775c2-cf43-4d67-ab36-99423219e86f","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-02-05T15:04:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:app":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"203775c2-cf43-4d67-ab36-99423219e86f\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"hostpath-volume"},"creationTimestamp":null,"labels":{"app":"do-node-agent","doks.digitalocean.com/managed":"true"}},"spec":{"containers":[{"args":["--path.procfs=/host/proc","--path.sysfs=/host/sys","--k8s-metrics-path=http://kube-state-metrics.kube-system.svc.cluster.local:8080/metrics","--additional-label=kubernetes_cluster_uuid:31e9afd3-a853-4f4a-8f92-f1aa29a91af5"],"command":["/bin/do-agent"],"image":"docker.io/digitalocean/do-agent:3.11.0","imagePullPolicy":"IfNotPresent","name":"do-node-agent","resources":{"limits":{"cpu":"102m","memory":"300Mi"},"requests":{"cpu":"102m","memory":"80Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/host/proc","name":"proc","readOnly":true},{"mountPath":"/host/sys","name":"sys","readOnly":true},{"mountPath":"/host/root","mountPropagation":"HostToContainer","name":"root","readOnly":true}]}],"dnsPolicy":"ClusterFirstWithHostNet","hostNetwork":true,"nodeSelector":{"beta.kubernetes.io/os":"linux"},"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{"runAsNonRoot":true,"runAsUser":65534},"serviceAccount":"do-agent","serviceAccountName":"do-agent","terminationGracePeriodSeconds":30,"tolerations":[{"operator":"Exists"}],"volumes":[{"hostPath":{"path":"/proc","type":""},"name":"proc"},{"hostPath":{"path":"/sys","type":""},"name":"sys"},{"hostPath":{"path":"/","type":""},"name":"root"}]}}}},"revision":2},{"metadata":{"name":"kube-proxy-55dc98c8f","namespace":"kube-system","uid":"7f2efd67-3f28-45fe-9a5e-7d1d92ee71b9","resourceVersion":"372","creationTimestamp":"2021-11-26T10:25:44Z","labels":{"controller-revision-hash":"55dc98c8f","doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"},"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"},\"name\":\"kube-proxy\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"spec\":{\"containers\":[{\"command\":[\"kube-proxy\",\"--config=/etc/kubernetes/config/kube-proxy-config.yaml\"],\"image\":\"k8s.gcr.io/kube-proxy:v1.21.5\",\"name\":\"kube-proxy\",\"resources\":{\"requests\":{\"memory\":\"125Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/kubeconfig\",\"name\":\"kube-proxy-kubeconfig\",\"readOnly\":true},{\"mountPath\":\"/etc/kubernetes/config\",\"name\":\"kube-proxy-config\",\"readOnly\":true}]}],\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"sh\",\"-c\",\"rm -f /etc/kubernetes/manifests/kube-proxy.yaml\"],\"image\":\"docker.io/library/busybox:1.30\",\"name\":\"clear-static-kube-proxy\",\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/manifests\",\"name\":\"etc-kube-manifests\"}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"kube-proxy\",\"tolerations\":[{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"}],\"volumes\":[{\"configMap\":{\"items\":[{\"key\":\"kube-proxy-config\",\"path\":\"kube-proxy-config.yaml\"}],\"name\":\"kube-proxy\"},\"name\":\"kube-proxy-config\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/manifests\"},\"name\":\"etc-kube-manifests\"},{\"name\":\"kube-proxy-kubeconfig\",\"secret\":{\"items\":[{\"key\":\"kube-proxy.kubeconfig\",\"path\":\"kube-proxy.kubeconfig\"}],\"secretName\":\"kube-proxy\"}}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"kube-proxy","uid":"4f7862b3-7240-4463-8f63-5e344985f03f","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-11-26T10:25:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"4f7862b3-7240-4463-8f63-5e344985f03f\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"}},"spec":{"containers":[{"command":["kube-proxy","--config=/etc/kubernetes/config/kube-proxy-config.yaml"],"image":"k8s.gcr.io/kube-proxy:v1.21.5","imagePullPolicy":"IfNotPresent","name":"kube-proxy","resources":{"requests":{"memory":"125Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/kubeconfig","name":"kube-proxy-kubeconfig","readOnly":true},{"mountPath":"/etc/kubernetes/config","name":"kube-proxy-config","readOnly":true}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["sh","-c","rm -f /etc/kubernetes/manifests/kube-proxy.yaml"],"image":"docker.io/library/busybox:1.30","imagePullPolicy":"IfNotPresent","name":"clear-static-kube-proxy","resources":{},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/manifests","name":"etc-kube-manifests"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"kube-proxy","serviceAccountName":"kube-proxy","terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"key":"CriticalAddonsOnly","operator":"Exists"}],"volumes":[{"configMap":{"defaultMode":420,"items":[{"key":"kube-proxy-config","path":"kube-proxy-config.yaml"}],"name":"kube-proxy"},"name":"kube-proxy-config"},{"hostPath":{"path":"/etc/kubernetes/manifests","type":""},"name":"etc-kube-manifests"},{"name":"kube-proxy-kubeconfig","secret":{"defaultMode":420,"items":[{"key":"kube-proxy.kubeconfig","path":"kube-proxy.kubeconfig"}],"secretName":"kube-proxy"}}]}}}},"revision":1},{"metadata":{"name":"kube-proxy-5f79ccdd59","namespace":"kube-system","uid":"3fb68c91-99d7-40ee-aea3-22fbb0519ebf","resourceVersion":"32648385","creationTimestamp":"2022-03-12T15:04:45Z","labels":{"controller-revision-hash":"5f79ccdd59","doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"},"annotations":{"deprecated.daemonset.template.generation":"3","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"},\"name\":\"kube-proxy\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"spec\":{\"containers\":[{\"command\":[\"kube-proxy\",\"--config=/etc/kubernetes/config/kube-proxy-config.yaml\"],\"image\":\"k8s.gcr.io/kube-proxy:v1.21.10\",\"name\":\"kube-proxy\",\"resources\":{\"requests\":{\"memory\":\"125Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/kubeconfig\",\"name\":\"kube-proxy-kubeconfig\",\"readOnly\":true},{\"mountPath\":\"/etc/kubernetes/config\",\"name\":\"kube-proxy-config\",\"readOnly\":true}]}],\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"sh\",\"-c\",\"rm -f /etc/kubernetes/manifests/kube-proxy.yaml\"],\"image\":\"docker.io/library/busybox:1.30\",\"name\":\"clear-static-kube-proxy\",\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/manifests\",\"name\":\"etc-kube-manifests\"}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"kube-proxy\",\"tolerations\":[{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"}],\"volumes\":[{\"configMap\":{\"items\":[{\"key\":\"kube-proxy-config\",\"path\":\"kube-proxy-config.yaml\"}],\"name\":\"kube-proxy\"},\"name\":\"kube-proxy-config\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/manifests\"},\"name\":\"etc-kube-manifests\"},{\"name\":\"kube-proxy-kubeconfig\",\"secret\":{\"items\":[{\"key\":\"kube-proxy.kubeconfig\",\"path\":\"kube-proxy.kubeconfig\"}],\"secretName\":\"kube-proxy\"}}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"kube-proxy","uid":"4f7862b3-7240-4463-8f63-5e344985f03f","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-03-12T15:04:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"4f7862b3-7240-4463-8f63-5e344985f03f\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"}},"spec":{"containers":[{"command":["kube-proxy","--config=/etc/kubernetes/config/kube-proxy-config.yaml"],"image":"k8s.gcr.io/kube-proxy:v1.21.10","imagePullPolicy":"IfNotPresent","name":"kube-proxy","resources":{"requests":{"memory":"125Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/kubeconfig","name":"kube-proxy-kubeconfig","readOnly":true},{"mountPath":"/etc/kubernetes/config","name":"kube-proxy-config","readOnly":true}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["sh","-c","rm -f /etc/kubernetes/manifests/kube-proxy.yaml"],"image":"docker.io/library/busybox:1.30","imagePullPolicy":"IfNotPresent","name":"clear-static-kube-proxy","resources":{},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/manifests","name":"etc-kube-manifests"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"kube-proxy","serviceAccountName":"kube-proxy","terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"key":"CriticalAddonsOnly","operator":"Exists"}],"volumes":[{"configMap":{"defaultMode":420,"items":[{"key":"kube-proxy-config","path":"kube-proxy-config.yaml"}],"name":"kube-proxy"},"name":"kube-proxy-config"},{"hostPath":{"path":"/etc/kubernetes/manifests","type":""},"name":"etc-kube-manifests"},{"name":"kube-proxy-kubeconfig","secret":{"defaultMode":420,"items":[{"key":"kube-proxy.kubeconfig","path":"kube-proxy.kubeconfig"}],"secretName":"kube-proxy"}}]}}}},"revision":3},{"metadata":{"name":"kube-proxy-7779b9ff65","namespace":"kube-system","uid":"2519361c-044e-4d65-b9e8-f4940a82fbd6","resourceVersion":"21909218","creationTimestamp":"2022-02-05T15:04:46Z","labels":{"controller-revision-hash":"7779b9ff65","doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"},"annotations":{"deprecated.daemonset.template.generation":"2","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"},\"name\":\"kube-proxy\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"spec\":{\"containers\":[{\"command\":[\"kube-proxy\",\"--config=/etc/kubernetes/config/kube-proxy-config.yaml\"],\"image\":\"k8s.gcr.io/kube-proxy:v1.21.9\",\"name\":\"kube-proxy\",\"resources\":{\"requests\":{\"memory\":\"125Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/kubeconfig\",\"name\":\"kube-proxy-kubeconfig\",\"readOnly\":true},{\"mountPath\":\"/etc/kubernetes/config\",\"name\":\"kube-proxy-config\",\"readOnly\":true}]}],\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"sh\",\"-c\",\"rm -f /etc/kubernetes/manifests/kube-proxy.yaml\"],\"image\":\"docker.io/library/busybox:1.30\",\"name\":\"clear-static-kube-proxy\",\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/manifests\",\"name\":\"etc-kube-manifests\"}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"kube-proxy\",\"tolerations\":[{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"}],\"volumes\":[{\"configMap\":{\"items\":[{\"key\":\"kube-proxy-config\",\"path\":\"kube-proxy-config.yaml\"}],\"name\":\"kube-proxy\"},\"name\":\"kube-proxy-config\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/manifests\"},\"name\":\"etc-kube-manifests\"},{\"name\":\"kube-proxy-kubeconfig\",\"secret\":{\"items\":[{\"key\":\"kube-proxy.kubeconfig\",\"path\":\"kube-proxy.kubeconfig\"}],\"secretName\":\"kube-proxy\"}}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"kube-proxy","uid":"4f7862b3-7240-4463-8f63-5e344985f03f","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-02-05T15:04:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"4f7862b3-7240-4463-8f63-5e344985f03f\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"}},"spec":{"containers":[{"command":["kube-proxy","--config=/etc/kubernetes/config/kube-proxy-config.yaml"],"image":"k8s.gcr.io/kube-proxy:v1.21.9","imagePullPolicy":"IfNotPresent","name":"kube-proxy","resources":{"requests":{"memory":"125Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/kubeconfig","name":"kube-proxy-kubeconfig","readOnly":true},{"mountPath":"/etc/kubernetes/config","name":"kube-proxy-config","readOnly":true}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["sh","-c","rm -f /etc/kubernetes/manifests/kube-proxy.yaml"],"image":"docker.io/library/busybox:1.30","imagePullPolicy":"IfNotPresent","name":"clear-static-kube-proxy","resources":{},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/manifests","name":"etc-kube-manifests"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"kube-proxy","serviceAccountName":"kube-proxy","terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"key":"CriticalAddonsOnly","operator":"Exists"}],"volumes":[{"configMap":{"defaultMode":420,"items":[{"key":"kube-proxy-config","path":"kube-proxy-config.yaml"}],"name":"kube-proxy"},"name":"kube-proxy-config"},{"hostPath":{"path":"/etc/kubernetes/manifests","type":""},"name":"etc-kube-manifests"},{"name":"kube-proxy-kubeconfig","secret":{"defaultMode":420,"items":[{"key":"kube-proxy.kubeconfig","path":"kube-proxy.kubeconfig"}],"secretName":"kube-proxy"}}]}}}},"revision":2},{"metadata":{"name":"kube-proxy-77ddf788b8","namespace":"kube-system","uid":"d8d987fe-68d2-40de-8391-b2bf07039db5","resourceVersion":"41173477","creationTimestamp":"2022-04-09T15:05:16Z","labels":{"controller-revision-hash":"77ddf788b8","doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"},"annotations":{"deprecated.daemonset.template.generation":"4","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"},\"name\":\"kube-proxy\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":{\"clusterlint.digitalocean.com/disabled-checks\":\"privileged-containers,non-root-user,resource-requirements,hostpath-volume\"},\"labels\":{\"doks.digitalocean.com/managed\":\"true\",\"k8s-app\":\"kube-proxy\",\"tier\":\"node\"}},\"spec\":{\"containers\":[{\"command\":[\"kube-proxy\",\"--config=/etc/kubernetes/config/kube-proxy-config.yaml\"],\"image\":\"k8s.gcr.io/kube-proxy:v1.21.11\",\"name\":\"kube-proxy\",\"resources\":{\"requests\":{\"memory\":\"125Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/kubeconfig\",\"name\":\"kube-proxy-kubeconfig\",\"readOnly\":true},{\"mountPath\":\"/etc/kubernetes/config\",\"name\":\"kube-proxy-config\",\"readOnly\":true}]}],\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"sh\",\"-c\",\"rm -f /etc/kubernetes/manifests/kube-proxy.yaml\"],\"image\":\"docker.io/library/busybox:1.30\",\"name\":\"clear-static-kube-proxy\",\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/kubernetes/manifests\",\"name\":\"etc-kube-manifests\"}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"kube-proxy\",\"tolerations\":[{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"}],\"volumes\":[{\"configMap\":{\"items\":[{\"key\":\"kube-proxy-config\",\"path\":\"kube-proxy-config.yaml\"}],\"name\":\"kube-proxy\"},\"name\":\"kube-proxy-config\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/manifests\"},\"name\":\"etc-kube-manifests\"},{\"name\":\"kube-proxy-kubeconfig\",\"secret\":{\"items\":[{\"key\":\"kube-proxy.kubeconfig\",\"path\":\"kube-proxy.kubeconfig\"}],\"secretName\":\"kube-proxy\"}}]}},\"updateStrategy\":{\"type\":\"OnDelete\"}}}\n"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"kube-proxy","uid":"4f7862b3-7240-4463-8f63-5e344985f03f","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2022-04-09T15:05:16Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:doks.digitalocean.com/managed":{},"f:k8s-app":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"4f7862b3-7240-4463-8f63-5e344985f03f\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"clusterlint.digitalocean.com/disabled-checks":"privileged-containers,non-root-user,resource-requirements,hostpath-volume"},"creationTimestamp":null,"labels":{"doks.digitalocean.com/managed":"true","k8s-app":"kube-proxy","tier":"node"}},"spec":{"containers":[{"command":["kube-proxy","--config=/etc/kubernetes/config/kube-proxy-config.yaml"],"image":"k8s.gcr.io/kube-proxy:v1.21.11","imagePullPolicy":"IfNotPresent","name":"kube-proxy","resources":{"requests":{"memory":"125Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/kubeconfig","name":"kube-proxy-kubeconfig","readOnly":true},{"mountPath":"/etc/kubernetes/config","name":"kube-proxy-config","readOnly":true}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"initContainers":[{"command":["sh","-c","rm -f /etc/kubernetes/manifests/kube-proxy.yaml"],"image":"docker.io/library/busybox:1.30","imagePullPolicy":"IfNotPresent","name":"clear-static-kube-proxy","resources":{},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/kubernetes/manifests","name":"etc-kube-manifests"}]}],"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"kube-proxy","serviceAccountName":"kube-proxy","terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"key":"CriticalAddonsOnly","operator":"Exists"}],"volumes":[{"configMap":{"defaultMode":420,"items":[{"key":"kube-proxy-config","path":"kube-proxy-config.yaml"}],"name":"kube-proxy"},"name":"kube-proxy-config"},{"hostPath":{"path":"/etc/kubernetes/manifests","type":""},"name":"etc-kube-manifests"},{"name":"kube-proxy-kubeconfig","secret":{"defaultMode":420,"items":[{"key":"kube-proxy.kubeconfig","path":"kube-proxy.kubeconfig"}],"secretName":"kube-proxy"}}]}}}},"revision":4},{"metadata":{"name":"alertmanager-prometheus-kube-prometheus-alertmanager-6899f4447","namespace":"prometheus","uid":"5a65c828-47d9-401a-835c-c88bfb7f689e","resourceVersion":"2366238","creationTimestamp":"2021-12-06T16:26:05Z","labels":{"alertmanager":"prometheus-kube-prometheus-alertmanager","app.kubernetes.io/instance":"prometheus-kube-prometheus-alertmanager","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"alertmanager","app.kubernetes.io/version":"0.23.0","controller.kubernetes.io/hash":"6899f4447"},"annotations":{"meta.helm.sh/release-name":"prometheus","meta.helm.sh/release-namespace":"prometheus","prometheus-operator-input-hash":"9732321849248434546"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"alertmanager-prometheus-kube-prometheus-alertmanager","uid":"86c39e64-4ca7-44fb-8518-5b848921cc34","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-12-06T16:26:05Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:meta.helm.sh/release-name":{},"f:meta.helm.sh/release-namespace":{},"f:prometheus-operator-input-hash":{}},"f:labels":{".":{},"f:alertmanager":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/version":{},"f:controller.kubernetes.io/hash":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"86c39e64-4ca7-44fb-8518-5b848921cc34\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"kubectl.kubernetes.io/default-container":"alertmanager"},"creationTimestamp":null,"labels":{"alertmanager":"prometheus-kube-prometheus-alertmanager","app.kubernetes.io/instance":"prometheus-kube-prometheus-alertmanager","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"alertmanager","app.kubernetes.io/version":"0.23.0"}},"spec":{"containers":[{"args":["--config.file=/etc/alertmanager/config/alertmanager.yaml","--storage.path=/alertmanager","--data.retention=120h","--cluster.listen-address=","--web.listen-address=:9093","--web.external-url=http://prometheus-kube-prometheus-alertmanager.prometheus:9093","--web.route-prefix=/","--cluster.peer=alertmanager-prometheus-kube-prometheus-alertmanager-0.alertmanager-operated:9094","--cluster.reconnect-timeout=5m"],"env":[{"name":"POD_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}}],"image":"quay.io/prometheus/alertmanager:v0.23.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":10,"httpGet":{"path":"/-/healthy","port":"web","scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":3},"name":"alertmanager","ports":[{"containerPort":9093,"name":"web","protocol":"TCP"},{"containerPort":9094,"name":"mesh-tcp","protocol":"TCP"},{"containerPort":9094,"name":"mesh-udp","protocol":"UDP"}],"readinessProbe":{"failureThreshold":10,"httpGet":{"path":"/-/ready","port":"web","scheme":"HTTP"},"initialDelaySeconds":3,"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"resources":{"requests":{"memory":"200Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","volumeMounts":[{"mountPath":"/etc/alertmanager/config","name":"config-volume"},{"mountPath":"/etc/alertmanager/certs","name":"tls-assets","readOnly":true},{"mountPath":"/alertmanager","name":"alertmanager-prometheus-kube-prometheus-alertmanager-db"}]},{"args":["--listen-address=:8080","--reload-url=http://127.0.0.1:9093/-/reload","--watched-dir=/etc/alertmanager/config"],"command":["/bin/prometheus-config-reloader"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"SHARD","value":"-1"}],"image":"quay.io/prometheus-operator/prometheus-config-reloader:v0.52.0","imagePullPolicy":"IfNotPresent","name":"config-reloader","ports":[{"containerPort":8080,"name":"reloader-web","protocol":"TCP"}],"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","volumeMounts":[{"mountPath":"/etc/alertmanager/config","name":"config-volume","readOnly":true}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{"fsGroup":2000,"runAsGroup":2000,"runAsNonRoot":true,"runAsUser":1000},"serviceAccount":"prometheus-kube-prometheus-alertmanager","serviceAccountName":"prometheus-kube-prometheus-alertmanager","terminationGracePeriodSeconds":120,"volumes":[{"name":"config-volume","secret":{"defaultMode":420,"secretName":"alertmanager-prometheus-kube-prometheus-alertmanager-generated"}},{"name":"tls-assets","secret":{"defaultMode":420,"secretName":"alertmanager-prometheus-kube-prometheus-alertmanager-tls-assets"}},{"emptyDir":{},"name":"alertmanager-prometheus-kube-prometheus-alertmanager-db"}]}}}},"revision":1},{"metadata":{"name":"prometheus-prometheus-kube-prometheus-prometheus-75d74b7bd4","namespace":"prometheus","uid":"ce142a72-fcaa-4c2a-9120-bea2f2b1fa49","resourceVersion":"2366255","creationTimestamp":"2021-12-06T16:26:06Z","labels":{"app.kubernetes.io/instance":"prometheus-kube-prometheus-prometheus","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"prometheus","app.kubernetes.io/version":"2.31.1","controller.kubernetes.io/hash":"75d74b7bd4","operator.prometheus.io/name":"prometheus-kube-prometheus-prometheus","operator.prometheus.io/shard":"0","prometheus":"prometheus-kube-prometheus-prometheus"},"annotations":{"meta.helm.sh/release-name":"prometheus","meta.helm.sh/release-namespace":"prometheus","prometheus-operator-input-hash":"9608498947814727956"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"prometheus-prometheus-kube-prometheus-prometheus","uid":"80f4c265-9b6e-4733-83ef-a4a123378d75","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-12-06T16:26:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:meta.helm.sh/release-name":{},"f:meta.helm.sh/release-namespace":{},"f:prometheus-operator-input-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/version":{},"f:controller.kubernetes.io/hash":{},"f:operator.prometheus.io/name":{},"f:operator.prometheus.io/shard":{},"f:prometheus":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"80f4c265-9b6e-4733-83ef-a4a123378d75\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"kubectl.kubernetes.io/default-container":"prometheus"},"creationTimestamp":null,"labels":{"app.kubernetes.io/instance":"prometheus-kube-prometheus-prometheus","app.kubernetes.io/managed-by":"prometheus-operator","app.kubernetes.io/name":"prometheus","app.kubernetes.io/version":"2.31.1","operator.prometheus.io/name":"prometheus-kube-prometheus-prometheus","operator.prometheus.io/shard":"0","prometheus":"prometheus-kube-prometheus-prometheus"}},"spec":{"containers":[{"args":["--web.console.templates=/etc/prometheus/consoles","--web.console.libraries=/etc/prometheus/console_libraries","--config.file=/etc/prometheus/config_out/prometheus.env.yaml","--storage.tsdb.path=/prometheus","--storage.tsdb.retention.time=10d","--web.enable-lifecycle","--web.external-url=http://prometheus-kube-prometheus-prometheus.prometheus:9090","--web.route-prefix=/","--web.config.file=/etc/prometheus/web_config/web-config.yaml"],"image":"quay.io/prometheus/prometheus:v2.31.1","imagePullPolicy":"IfNotPresent","name":"prometheus","ports":[{"containerPort":9090,"name":"web","protocol":"TCP"}],"readinessProbe":{"failureThreshold":120,"httpGet":{"path":"/-/ready","port":"web","scheme":"HTTP"},"periodSeconds":5,"successThreshold":1,"timeoutSeconds":3},"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","volumeMounts":[{"mountPath":"/etc/prometheus/config_out","name":"config-out","readOnly":true},{"mountPath":"/etc/prometheus/certs","name":"tls-assets","readOnly":true},{"mountPath":"/prometheus","name":"prometheus-prometheus-kube-prometheus-prometheus-db"},{"mountPath":"/etc/prometheus/rules/prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0","name":"prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0"},{"mountPath":"/etc/prometheus/web_config/web-config.yaml","name":"web-config","readOnly":true,"subPath":"web-config.yaml"}]},{"args":["--listen-address=:8080","--reload-url=http://127.0.0.1:9090/-/reload","--config-file=/etc/prometheus/config/prometheus.yaml.gz","--config-envsubst-file=/etc/prometheus/config_out/prometheus.env.yaml","--watched-dir=/etc/prometheus/rules/prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0"],"command":["/bin/prometheus-config-reloader"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"SHARD","value":"0"}],"image":"quay.io/prometheus-operator/prometheus-config-reloader:v0.52.0","imagePullPolicy":"IfNotPresent","name":"config-reloader","ports":[{"containerPort":8080,"name":"reloader-web","protocol":"TCP"}],"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","volumeMounts":[{"mountPath":"/etc/prometheus/config","name":"config"},{"mountPath":"/etc/prometheus/config_out","name":"config-out"},{"mountPath":"/etc/prometheus/rules/prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0","name":"prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0"}]}],"dnsPolicy":"ClusterFirst","initContainers":[{"args":["--watch-interval=0","--listen-address=:8080","--config-file=/etc/prometheus/config/prometheus.yaml.gz","--config-envsubst-file=/etc/prometheus/config_out/prometheus.env.yaml","--watched-dir=/etc/prometheus/rules/prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0"],"command":["/bin/prometheus-config-reloader"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"SHARD","value":"0"}],"image":"quay.io/prometheus-operator/prometheus-config-reloader:v0.52.0","imagePullPolicy":"IfNotPresent","name":"init-config-reloader","ports":[{"containerPort":8080,"name":"reloader-web","protocol":"TCP"}],"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"FallbackToLogsOnError","volumeMounts":[{"mountPath":"/etc/prometheus/config","name":"config"},{"mountPath":"/etc/prometheus/config_out","name":"config-out"},{"mountPath":"/etc/prometheus/rules/prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0","name":"prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0"}]}],"restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{"fsGroup":2000,"runAsGroup":2000,"runAsNonRoot":true,"runAsUser":1000},"serviceAccount":"prometheus-kube-prometheus-prometheus","serviceAccountName":"prometheus-kube-prometheus-prometheus","terminationGracePeriodSeconds":600,"volumes":[{"name":"config","secret":{"defaultMode":420,"secretName":"prometheus-prometheus-kube-prometheus-prometheus"}},{"name":"tls-assets","secret":{"defaultMode":420,"secretName":"prometheus-prometheus-kube-prometheus-prometheus-tls-assets"}},{"emptyDir":{},"name":"config-out"},{"configMap":{"defaultMode":420,"name":"prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0"},"name":"prometheus-prometheus-kube-prometheus-prometheus-rulefiles-0"},{"name":"web-config","secret":{"defaultMode":420,"secretName":"prometheus-prometheus-kube-prometheus-prometheus-web-config"}},{"emptyDir":{},"name":"prometheus-prometheus-kube-prometheus-prometheus-db"}]}}}},"revision":1},{"metadata":{"name":"prometheus-prometheus-node-exporter-5fb9568fbf","namespace":"prometheus","uid":"c2a282f3-7c82-49d9-92f6-73189a395ccd","resourceVersion":"2366072","creationTimestamp":"2021-12-06T16:26:01Z","labels":{"app":"prometheus-node-exporter","chart":"prometheus-node-exporter-2.2.0","controller-revision-hash":"5fb9568fbf","heritage":"Helm","jobLabel":"node-exporter","release":"prometheus"},"annotations":{"deprecated.daemonset.template.generation":"1","meta.helm.sh/release-name":"prometheus","meta.helm.sh/release-namespace":"prometheus"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"prometheus-prometheus-node-exporter","uid":"71986136-1a97-45e1-9de4-6fa85a6ad14e","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-12-06T16:26:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:meta.helm.sh/release-name":{},"f:meta.helm.sh/release-namespace":{}},"f:labels":{".":{},"f:app":{},"f:chart":{},"f:controller-revision-hash":{},"f:heritage":{},"f:jobLabel":{},"f:release":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"71986136-1a97-45e1-9de4-6fa85a6ad14e\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}}}]},"data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"cluster-autoscaler.kubernetes.io/safe-to-evict":"true"},"creationTimestamp":null,"labels":{"app":"prometheus-node-exporter","chart":"prometheus-node-exporter-2.2.0","heritage":"Helm","jobLabel":"node-exporter","release":"prometheus"}},"spec":{"automountServiceAccountToken":false,"containers":[{"args":["--path.procfs=/host/proc","--path.sysfs=/host/sys","--path.rootfs=/host/root","--web.listen-address=$(HOST_IP):9100","--collector.filesystem.ignored-mount-points=^/(dev|proc|sys|var/lib/docker/.+|var/lib/kubelet/.+)($|/)","--collector.filesystem.ignored-fs-types=^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|iso9660|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$"],"env":[{"name":"HOST_IP","value":"0.0.0.0"}],"image":"quay.io/prometheus/node-exporter:v1.2.2","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/","port":9100,"scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"name":"node-exporter","ports":[{"containerPort":9100,"hostPort":9100,"name":"metrics","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/","port":9100,"scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/host/proc","name":"proc","readOnly":true},{"mountPath":"/host/sys","name":"sys","readOnly":true},{"mountPath":"/host/root","mountPropagation":"HostToContainer","name":"root","readOnly":true}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"hostPID":true,"restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{"fsGroup":65534,"runAsGroup":65534,"runAsNonRoot":true,"runAsUser":65534},"serviceAccount":"prometheus-prometheus-node-exporter","serviceAccountName":"prometheus-prometheus-node-exporter","terminationGracePeriodSeconds":30,"tolerations":[{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/proc","type":""},"name":"proc"},{"hostPath":{"path":"/sys","type":""},"name":"sys"},{"hostPath":{"path":"/","type":""},"name":"root"}]}}}},"revision":1}]}
